<!DOCTYPE html>
<html lang="zh" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="whitepure" />
	
	
	
	<title>常见故障排查及程序配置 ｜ whitepure</title>
	
    
    
    <meta name="description" content="故障排查基础 收录Linux常用命令，以下命令来自https://www.bilibili.com/video/BV14A411378a 关机/重启/注销 常用命令 作" />
    

    
    
    <meta name="keywords" content="whitepure博客, whiteppure, whitepure" />
    

	
    
    <link rel="shortcut icon" href="https://whiteppure.github.io/iblog/images/favicon.ico" />

    <link rel="stylesheet" type="text/css" media="screen" href="https://whiteppure.github.io/iblog/css/normalize.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://whiteppure.github.io/iblog/css/zozo.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://whiteppure.github.io/iblog/css/highlight.css" />

    <link rel="stylesheet" type="text/css" media="screen" href="https://whiteppure.github.io/iblog/css/toc.css" />

    
    
</head>

<body>
    
    
    









<div class="toc">

    <div class="page-header"><strong>- CATALOG -</strong></div>

    <div id="page-scrollspy" class="toc-nav">

        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#%e6%95%85%e9%9a%9c%e6%8e%92%e6%9f%a5%e5%9f%ba%e7%a1%80">
                    故障排查基础
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#%e5%85%b3%e6%9c%ba%e9%87%8d%e5%90%af%e6%b3%a8%e9%94%80">
                    关机/重启/注销
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#%e7%b3%bb%e7%bb%9f%e4%bf%a1%e6%81%af%e5%92%8c%e6%80%a7%e8%83%bd%e6%9f%a5%e7%9c%8b">
                    系统信息和性能查看
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#%e7%a3%81%e7%9b%98%e5%92%8c%e5%88%86%e5%8c%ba">
                    磁盘和分区
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#%e6%88%b7%e5%92%8c%e6%88%b7%e7%bb%84">
                    ⽤户和⽤户组
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#%e7%bb%9c%e5%92%8c%e8%bf%9b%e7%a8%8b%e7%ae%a1%e7%90%86">
                    ⽹络和进程管理
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#%e5%b8%b8%e7%b3%bb%e7%bb%9f%e6%9c%8d%e5%8a%a1%e5%91%bd%e4%bb%a4">
                    常⻅系统服务命令
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#%e4%bb%b6%e5%92%8c%e5%bd%95%e6%93%8d%e4%bd%9c">
                    ⽂件和⽬录操作
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#%e4%bb%b6%e6%9f%a5%e7%9c%8b%e5%92%8c%e5%a4%84%e7%90%86">
                    ⽂件查看和处理
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#%e6%89%93%e5%8c%85%e5%92%8c%e8%a7%a3%e5%8e%8b">
                    打包和解压
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#rpm%e5%8c%85%e7%ae%a1%e7%90%86%e5%91%bd%e4%bb%a4">
                    RPM包管理命令
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#yum%e5%8c%85%e7%ae%a1%e7%90%86%e5%91%bd%e4%bb%a4">
                    YUM包管理命令
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#dpkg%e5%8c%85%e7%ae%a1%e7%90%86%e5%91%bd%e4%bb%a4">
                    DPKG包管理命令
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#apt%e8%bd%af%e4%bb%b6%e5%85%b7">
                    APT软件⼯具
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#%e5%88%86%e6%9e%90%e5%b7%a5%e5%85%b7">
                    分析工具
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#jdk%e8%87%aa%e5%b8%a6%e5%88%86%e6%9e%90%e5%b7%a5%e5%85%b7">
                    JDK自带分析工具
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#jps">
                    jps
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#jstat">
                    jstat
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#jinfo">
                    jinfo
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#jmap">
                    jmap
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#jhat">
                    jhat
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#jstack">
                    jstack
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#jcmd">
                    jcmd
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#gui%e5%88%86%e6%9e%90%e5%b7%a5%e5%85%b7">
                    GUI分析工具
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#jconsole">
                    jconsole
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#visual-vm">
                    visual vm
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#eclipse-mat">
                    eclipse MAT
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#java%e5%ba%94%e7%94%a8%e7%a8%8b%e5%ba%8f%e9%85%8d%e7%bd%ae">
                    Java应用程序配置
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#jvm%e5%b8%b8%e7%94%a8%e5%8f%82%e6%95%b0">
                    JVM常用参数
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#jvm%e8%b0%83%e4%bc%98">
                    JVM调优
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#java%e7%a8%8b%e5%ba%8fshell%e8%84%9a%e6%9c%ac%e7%a4%ba%e4%be%8b">
                    Java程序shell脚本示例
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#%e5%b8%b8%e8%a7%81%e6%95%85%e9%9a%9c%e6%8e%92%e6%9f%a5">
                    常见故障排查
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#cpu%e4%bd%bf%e7%94%a8%e8%bf%87%e9%ab%98%e5%ae%9a%e4%bd%8d%e5%88%86%e6%9e%90">
                    CPU使用过高定位分析
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#%e5%86%85%e5%ad%98%e4%bd%bf%e7%94%a8%e8%bf%87%e9%ab%98%e5%ae%9a%e4%bd%8d%e5%88%86%e6%9e%90">
                    内存使用过高定位分析
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#%e6%ad%bb%e9%94%81%e7%bc%96%e7%a0%81%e5%8f%8a%e5%ae%9a%e4%bd%8d%e5%88%86%e6%9e%90">
                    死锁编码及定位分析
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link text-left" href="#%e5%86%85%e5%ad%98%e6%b3%84%e9%9c%b2%e6%8e%92%e6%9f%a5%e5%88%86%e6%9e%90">
                    内存泄露排查分析
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        

    </div>

</div>



    
    <div class="main animate__animated animate__fadeInDown" id="pdf_content">
        <div class="nav_container animated fadeInDown">
    <div class="site_nav" id="site_nav">
        <ul><li class="">
                <a href="https://whiteppure.github.io/iblog/">首页</a>
            </li><li class="">
                <a href="https://whiteppure.github.io/iblog/posts/">归档</a>
            </li><li class="">
                <a href="https://whiteppure.github.io/iblog/tags/">标签</a>
            </li><li class="">
                <a href="https://whiteppure.github.io/iblog/about/">关于</a>
            </li>
        </ul>
    </div>
    <div class="menu_icon">
        <a id="menu_icon"><i class="ri-menu-line"></i></a>
    </div>
</div>
        <div class="header animated fadeInDown">
    <div class="site_title_container">
        <div class="site_title">
            <h1>
                <a href="https://whiteppure.github.io/iblog/">
                    <span>whitepure</span>
                </a>
            </h1>
        </div>
        <div class="description">
            <p class="sub_title">
                时也命也
            </p>
            <div class="my_socials">
                
                
                <a href="https://github.com/whiteppure/" title="github" target="_blank">
                    <i class="ri-github-fill"></i>
                </a>
                
                
                <a href="https://whiteppure.github.io/iblog/index.xml" type="application/rss+xml" title="rss" target="_blank">
                    <i class="ri-rss-fill"></i>
                </a>
                



            </div>
            
            <div class="post">
                <div class="post_title post_detail_title">
                    <span class="date" id="busuanzi_container_site_pv">访问量 <span id="busuanzi_value_site_pv"></span>次</span>
                </div>
                <div class="post_title post_detail_title">
                    <span class="date" id="busuanzi_container_site_uv">访客数 <span id="busuanzi_value_site_uv"></span>人</span>
                </div>
            </div>
            
        </div>
    </div>
</div>
        <div class="content">
            <div class="post_page">
                <div class="post animate__animated animate__fadeInDown">
                    <div class="post_title post_detail_title">
                        <h2><a href='/iblog/posts/essays/eye-beam/'>常见故障排查及程序配置</a></h2>
                        <span class="date">2021.09.08</span>
                    </div>
                    <div class="post_content markdown"><h2 id="故障排查基础">故障排查基础</h2>
<p>收录Linux常用命令，以下命令来自<a href="https://www.bilibili.com/video/BV14A411378a">https://www.bilibili.com/video/BV14A411378a</a></p>
<h3 id="关机重启注销">关机/重启/注销</h3>
<table>
<thead>
<tr>
<th>常用命令</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>shutdown -h now</td>
<td>即刻关机</td>
</tr>
<tr>
<td>shutdown -h 10</td>
<td>10分钟后关机</td>
</tr>
<tr>
<td>shutdown -h 11:00</td>
<td>11：00关机</td>
</tr>
<tr>
<td>shutdown -h +10</td>
<td>预定时间关机（10分钟后）</td>
</tr>
<tr>
<td>shutdown -c</td>
<td>取消指定时间关机</td>
</tr>
<tr>
<td>shutdown -r now</td>
<td>重启</td>
</tr>
<tr>
<td>shutdown -r 10</td>
<td>10分钟之后重启</td>
</tr>
<tr>
<td>shutdown -r 11:00</td>
<td>定时重启</td>
</tr>
<tr>
<td>reboot</td>
<td>重启</td>
</tr>
<tr>
<td>init 6</td>
<td>重启</td>
</tr>
<tr>
<td>init 0</td>
<td>⽴刻关机</td>
</tr>
<tr>
<td>telinit 0</td>
<td>关机</td>
</tr>
<tr>
<td>poweroff</td>
<td>⽴刻关机</td>
</tr>
<tr>
<td>halt</td>
<td>关机</td>
</tr>
<tr>
<td>sync</td>
<td>buff数据同步到磁盘</td>
</tr>
<tr>
<td>logout</td>
<td>退出登录Shell</td>
</tr>
</tbody>
</table>
<h3 id="系统信息和性能查看">系统信息和性能查看</h3>
<table>
<thead>
<tr>
<th>常用命令</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>uname -a</td>
<td>查看内核/OS/CPU信息</td>
</tr>
<tr>
<td>uname -r</td>
<td>查看内核版本</td>
</tr>
<tr>
<td>uname -m</td>
<td>查看处理器架构</td>
</tr>
<tr>
<td>arch</td>
<td>查看处理器架构</td>
</tr>
<tr>
<td>hostname</td>
<td>查看计算机名</td>
</tr>
<tr>
<td>who</td>
<td>显示当前登录系统的⽤户</td>
</tr>
<tr>
<td>who am i</td>
<td>显示登录时的⽤户名</td>
</tr>
<tr>
<td>whoami</td>
<td>显示当前⽤户名</td>
</tr>
<tr>
<td>cat /proc/version</td>
<td>查看linux版本信息</td>
</tr>
<tr>
<td>cat /proc/cpuinfo</td>
<td>查看CPU信息</td>
</tr>
<tr>
<td>cat /proc/interrupts</td>
<td>查看中断</td>
</tr>
<tr>
<td>cat /proc/loadavg</td>
<td>查看系统负载</td>
</tr>
<tr>
<td>uptime</td>
<td>查看系统运⾏时间、⽤户数、负载</td>
</tr>
<tr>
<td>env</td>
<td>查看系统的环境变量</td>
</tr>
<tr>
<td>lsusb -tv</td>
<td>查看系统USB设备信息</td>
</tr>
<tr>
<td>lspci -tv</td>
<td>查看系统PCI设备信息</td>
</tr>
<tr>
<td>lsmod</td>
<td>查看已加载的系统模块</td>
</tr>
<tr>
<td>grep MemTotal /proc/meminfo</td>
<td>查看内存总量</td>
</tr>
<tr>
<td>grep MemFree /proc/meminfo</td>
<td>查看空闲内存量</td>
</tr>
<tr>
<td>free -m</td>
<td>查看内存⽤量和交换区⽤量</td>
</tr>
<tr>
<td>date</td>
<td>显示系统⽇期时间</td>
</tr>
<tr>
<td>cal 2021</td>
<td>显示2021⽇历表</td>
</tr>
<tr>
<td>top</td>
<td>动态显示cpu/内存/进程等情况</td>
</tr>
<tr>
<td>vmstat 1 20</td>
<td>每1秒采⼀次系统状态，采20次</td>
</tr>
<tr>
<td>iostat</td>
<td>查看io读写/cpu使⽤情况</td>
</tr>
<tr>
<td>查看io读写/cpu使⽤情况</td>
<td>查询cpu使⽤情况（1秒⼀次，共10次）</td>
</tr>
<tr>
<td>sar -d 1 10</td>
<td>查询磁盘性能</td>
</tr>
</tbody>
</table>
<h3 id="磁盘和分区">磁盘和分区</h3>
<table>
<thead>
<tr>
<th>常用命令</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>fdisk -l</td>
<td>查看所有磁盘分区</td>
</tr>
<tr>
<td>swapon -s</td>
<td>查看所有交换分区</td>
</tr>
<tr>
<td>df -h</td>
<td>查看磁盘使⽤情况及挂载点</td>
</tr>
<tr>
<td>df -hl</td>
<td>同上</td>
</tr>
<tr>
<td>du -sh /dir</td>
<td>查看指定某个⽬录的⼤⼩</td>
</tr>
<tr>
<td>du -sk * | sort -rn</td>
<td>从⾼到低依次显示⽂件和⽬录⼤⼩</td>
</tr>
<tr>
<td>mount /dev/hda2 /mnt/hda2</td>
<td>挂载hda2盘</td>
</tr>
<tr>
<td>mount -t ntfs /dev/sdc1 /mnt/usbhd1</td>
<td>指定⽂件系统类型挂载（如ntfs）</td>
</tr>
<tr>
<td>mount -o loop xxx.iso /mnt/cdrom</td>
<td>挂 载 iso ⽂ 件</td>
</tr>
<tr>
<td>umount -v /dev/sda1</td>
<td>通过设备名卸载</td>
</tr>
<tr>
<td>umount -v /mnt/mymnt</td>
<td>通过挂载点卸载</td>
</tr>
<tr>
<td>fuser -km /mnt/hda1</td>
<td>强制卸载(慎⽤)</td>
</tr>
</tbody>
</table>
<h3 id="户和户组">⽤户和⽤户组</h3>
<table>
<thead>
<tr>
<th>常用命令</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>useradd codesheep</td>
<td>创建⽤户</td>
</tr>
<tr>
<td>userdel -r codesheep</td>
<td>删除⽤户</td>
</tr>
<tr>
<td>usermod -g group_name user_name</td>
<td>修改⽤户的组</td>
</tr>
<tr>
<td>usermod -aG group_name user_name</td>
<td>将⽤户添加到组</td>
</tr>
<tr>
<td>usermod -s /bin/ksh -d /home/codepig –g dev codesheep</td>
<td>修改⽤户codesheep的登录Shell、主⽬录以及⽤户组</td>
</tr>
<tr>
<td>groups test</td>
<td>查看test⽤户所在的组</td>
</tr>
<tr>
<td>groupadd group_name</td>
<td>创建⽤户组</td>
</tr>
<tr>
<td>groupdel group_name</td>
<td>删除⽤户组</td>
</tr>
<tr>
<td>groupmod -n new_name old_name</td>
<td>重命名⽤户组</td>
</tr>
<tr>
<td>su - user_name</td>
<td>su - user_name</td>
</tr>
<tr>
<td>passwd</td>
<td>修改⼝令</td>
</tr>
<tr>
<td>passwd codesheep</td>
<td>修改某⽤户的⼝令</td>
</tr>
<tr>
<td>w</td>
<td>查看活动⽤户</td>
</tr>
<tr>
<td>id codesheep</td>
<td>查看指定⽤户codesheep信息</td>
</tr>
<tr>
<td>last</td>
<td>查看⽤户登录⽇志</td>
</tr>
<tr>
<td>crontab -l</td>
<td>查看当前⽤户的计划任务</td>
</tr>
<tr>
<td>cut -d: -f1 /etc/passwd</td>
<td>查看系统所有⽤户</td>
</tr>
<tr>
<td>cut -d: -f1 /etc/group</td>
<td>查看系统所有组</td>
</tr>
</tbody>
</table>
<h3 id="络和进程管理">⽹络和进程管理</h3>
<table>
<thead>
<tr>
<th>常用命令</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>ifconfig</td>
<td>查看⽹络接⼝属性</td>
</tr>
<tr>
<td>ifconfig eth0</td>
<td>查看某⽹卡的配置</td>
</tr>
<tr>
<td>route -n</td>
<td>查看路由表</td>
</tr>
<tr>
<td>netstat -lntp</td>
<td>查看所有监听端⼝</td>
</tr>
<tr>
<td>netstat -antp</td>
<td>查看已经建⽴的TCP连接</td>
</tr>
<tr>
<td>netstat -lutp</td>
<td>查看TCP/UDP的状态信息</td>
</tr>
<tr>
<td>ifup eth0</td>
<td>启⽤eth0⽹络设备</td>
</tr>
<tr>
<td>ifdown eth0</td>
<td>禁⽤eth0⽹络设备</td>
</tr>
<tr>
<td>iptables -L</td>
<td>查看iptables规则</td>
</tr>
<tr>
<td>ifconfig eth0 192.168.1.1 netmask 255.255.255.0</td>
<td>配置ip地址</td>
</tr>
<tr>
<td>dhclient eth0</td>
<td>以dhcp模式启⽤eth0</td>
</tr>
<tr>
<td>route add -net 0/0 gw Gateway_IP</td>
<td>配置默认⽹关</td>
</tr>
<tr>
<td>route add -net 192.168.0.0 netmask 255.255.0.0 gw 192.168.1.1</td>
<td>配置静态路由到达⽹络'192.168.0.0/16'</td>
</tr>
<tr>
<td>route del 0/0 gw Gateway_IP</td>
<td>删除静态路由</td>
</tr>
<tr>
<td>hostname</td>
<td>查看主机名</td>
</tr>
<tr>
<td>host <a href="http://www.baidu.com">www.baidu.com</a></td>
<td>解析主机名</td>
</tr>
<tr>
<td>nslookup <a href="http://www.baidu.com">www.baidu.com</a></td>
<td>查询DNS记录，查看域名解析是否正常</td>
</tr>
<tr>
<td>ps -ef</td>
<td>查看所有进程</td>
</tr>
<tr>
<td>ps -ef | grep codesheep</td>
<td>过滤出你需要的进程</td>
</tr>
<tr>
<td>kill -s name</td>
<td>kill指定名称的进程</td>
</tr>
<tr>
<td>kill -s pid</td>
<td>kill指定pid的进程</td>
</tr>
<tr>
<td>top</td>
<td>实时显示进程状态</td>
</tr>
<tr>
<td>vmstat 1 20</td>
<td>每1秒采⼀次系统状态，采20次</td>
</tr>
<tr>
<td>iostat</td>
<td>iostat</td>
</tr>
<tr>
<td>sar -u 1 10</td>
<td>查询cpu使⽤情况（1秒⼀次，共10次）</td>
</tr>
<tr>
<td>sar -d 1 10</td>
<td>查询磁盘性能</td>
</tr>
</tbody>
</table>
<h3 id="常系统服务命令">常⻅系统服务命令</h3>
<table>
<thead>
<tr>
<th>常用命令</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>chkconfig &ndash;list</td>
<td>列出系统服务</td>
</tr>
<tr>
<td>service &lt;服务名&gt; status</td>
<td>查看某个服务</td>
</tr>
<tr>
<td>service &lt;服务名&gt; start</td>
<td>启动某个服务</td>
</tr>
<tr>
<td>service &lt;服务名&gt; stop</td>
<td>终⽌某个服务</td>
</tr>
<tr>
<td>service &lt;服务名&gt; restart</td>
<td>重启某个服务</td>
</tr>
<tr>
<td>systemctl status &lt;服务名&gt;</td>
<td>查看某个服务</td>
</tr>
<tr>
<td>systemctl start &lt;服务名&gt;</td>
<td>启动某个服务</td>
</tr>
<tr>
<td>systemctl stop &lt;服务名&gt;</td>
<td>终⽌某个服务</td>
</tr>
<tr>
<td>systemctl restart &lt;服务名&gt;</td>
<td>重启某个服务</td>
</tr>
<tr>
<td>systemctl enable &lt;服务名&gt;</td>
<td>关闭⾃启动</td>
</tr>
<tr>
<td>systemctl disable &lt;服务名&gt;</td>
<td>关闭⾃启动</td>
</tr>
</tbody>
</table>
<h3 id="件和录操作">⽂件和⽬录操作</h3>
<table>
<thead>
<tr>
<th>常用命令</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>cd &lt;⽬录名&gt;</td>
<td>进⼊某个⽬录</td>
</tr>
<tr>
<td>cd ..</td>
<td>回上级⽬录</td>
</tr>
<tr>
<td>cd ../..</td>
<td>回上两级⽬录</td>
</tr>
<tr>
<td>cd</td>
<td>进个⼈主⽬录</td>
</tr>
<tr>
<td>cd -</td>
<td>回上⼀步所在⽬录</td>
</tr>
<tr>
<td>pwd</td>
<td>显示当前路径</td>
</tr>
<tr>
<td>ls</td>
<td>查看⽂件⽬录列表</td>
</tr>
<tr>
<td>ls -F</td>
<td>查看⽬录中内容（显示是⽂件还是⽬录）</td>
</tr>
<tr>
<td>ls -l</td>
<td>查看⽂件和⽬录的详情列表</td>
</tr>
<tr>
<td>ls -a</td>
<td>查看隐藏⽂件</td>
</tr>
<tr>
<td>ls -lh</td>
<td>查看⽂件和⽬录的详情列表（增强⽂件⼤⼩易读性）</td>
</tr>
<tr>
<td>ls -lSr</td>
<td>查看⽂件和⽬录列表（以⽂件⼤⼩升序查看）</td>
</tr>
<tr>
<td>tree</td>
<td>查看⽂件和⽬录的树形结构</td>
</tr>
<tr>
<td>mkdir &lt;⽬录名&gt;</td>
<td>创建⽬录</td>
</tr>
<tr>
<td>mkdir dir1 dir2</td>
<td>同时创建两个⽬录</td>
</tr>
<tr>
<td>mkdir -p /tmp/dir1/dir2</td>
<td>创建⽬录树</td>
</tr>
<tr>
<td>rm -f file1</td>
<td>删除&rsquo;file1'⽂件</td>
</tr>
<tr>
<td>rmdir dir1</td>
<td>删除&rsquo;dir1'⽬录</td>
</tr>
<tr>
<td>rm -rf dir1</td>
<td>删除&rsquo;dir1'⽬录和其内容</td>
</tr>
<tr>
<td>rm -rf dir1 dir2</td>
<td>同时删除两个⽬录及其内容</td>
</tr>
<tr>
<td>mv old_dir new_dir</td>
<td>重命名/移动⽬录</td>
</tr>
<tr>
<td>cp file1 file2</td>
<td>复制⽂件</td>
</tr>
<tr>
<td>cp dir/* .</td>
<td>复制某⽬录下的所有⽂件⾄当前⽬录</td>
</tr>
<tr>
<td>cp -a dir1 dir2</td>
<td>复制⽬录</td>
</tr>
<tr>
<td>cp -a /tmp/dir1 .</td>
<td>复制⼀个⽬录⾄当前⽬录</td>
</tr>
<tr>
<td>ln -s file1 link1</td>
<td>创建指向⽂件/⽬录的软链接</td>
</tr>
<tr>
<td>ln file1 lnk1</td>
<td>创建指向⽂件/⽬录的物理链接</td>
</tr>
<tr>
<td>find / -name file1</td>
<td>从跟⽬录开始搜索⽂件/⽬录</td>
</tr>
<tr>
<td>find / -user user1</td>
<td>搜索⽤户user1的⽂件/⽬录</td>
</tr>
<tr>
<td>find /dir -name *.bin</td>
<td>在⽬录/dir中搜带有.bin后缀的⽂件</td>
</tr>
<tr>
<td>locate &lt;关键词&gt;</td>
<td>快速定位⽂件</td>
</tr>
<tr>
<td>locate *.mp4</td>
<td>寻找.mp4结尾的⽂件</td>
</tr>
<tr>
<td>whereis &lt;关键词&gt;</td>
<td>显示某⼆进制⽂件/可执⾏⽂件的路径</td>
</tr>
<tr>
<td>which &lt;关键词&gt;</td>
<td>查找系统⽬录下某的⼆进制⽂件</td>
</tr>
<tr>
<td>chmod ugo+rwx dir1</td>
<td>设置⽬录所有者(u)、群组(g)及其他⼈(o)的读（r）写(w)执⾏(x)权限</td>
</tr>
<tr>
<td>chmod go-rwx dir1</td>
<td>移除群组(g)与其他⼈(o)对⽬录的读写执⾏权限</td>
</tr>
<tr>
<td>chown user1 file1</td>
<td>改变⽂件的所有者属性</td>
</tr>
<tr>
<td>chown -R user1 dir1</td>
<td>改变⽬录的所有者属性</td>
</tr>
<tr>
<td>chgrp group1 file1</td>
<td>改变⽂件群组</td>
</tr>
<tr>
<td>chown user1:group1 file1</td>
<td>改变⽂件的所有⼈和群组</td>
</tr>
</tbody>
</table>
<h3 id="件查看和处理">⽂件查看和处理</h3>
<table>
<thead>
<tr>
<th>常用命令</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>cat file1</td>
<td>查看⽂件内容</td>
</tr>
<tr>
<td>cat -n file1</td>
<td>查看内容并标示⾏数</td>
</tr>
<tr>
<td>tac file1</td>
<td>从最后⼀⾏开始反看⽂件内容</td>
</tr>
<tr>
<td>more file1</td>
<td>more file1</td>
</tr>
<tr>
<td>less file1</td>
<td>类似more命令，但允许反向操作</td>
</tr>
<tr>
<td>head -2 file1</td>
<td>查看⽂件前两⾏</td>
</tr>
<tr>
<td>tail -2 file1</td>
<td>查看⽂件后两⾏</td>
</tr>
<tr>
<td>tail -f /log/msg</td>
<td>实时查看添加到⽂件中的内容</td>
</tr>
<tr>
<td>grep codesheep hello.txt</td>
<td>在⽂件hello.txt中查找关键词codesheep</td>
</tr>
<tr>
<td>grep ^sheep hello.txt</td>
<td>在⽂件hello.txt中查找以sheep开头的内容</td>
</tr>
<tr>
<td>grep [0-9] hello.txt</td>
<td>选择hello.txt⽂件中所有包含数字的⾏</td>
</tr>
<tr>
<td>sed &rsquo;s/s1/s2/g' hello.txt</td>
<td>将hello.txt⽂件中的s1替换成s2</td>
</tr>
<tr>
<td>sed &lsquo;/^$/d&rsquo; hello.txt</td>
<td>从hello.txt⽂件中删除所有空⽩⾏</td>
</tr>
<tr>
<td>sed &lsquo;/ *#/d; /^$/d&rsquo; hello.txt</td>
<td>从hello.txt⽂件中删除所有注释和空⽩⾏</td>
</tr>
<tr>
<td>sed -e &lsquo;1d&rsquo; hello.txt</td>
<td>从⽂件hello.txt 中排除第⼀⾏</td>
</tr>
<tr>
<td>sed -n &lsquo;/s1/p&rsquo; hello.txt</td>
<td>查看只包含关键词&quot;s1&quot;的⾏</td>
</tr>
<tr>
<td>sed -e &rsquo;s/ *$//' hello.txt</td>
<td>删除每⼀⾏最后的空⽩字符</td>
</tr>
<tr>
<td>sed -e &rsquo;s/s1//g' hello.txt</td>
<td>从⽂档中只删除词汇s1并保留剩余全部</td>
</tr>
<tr>
<td>sed -n &lsquo;1,5p;5q&rsquo; hello.txt</td>
<td>查看从第⼀⾏到第5⾏内容</td>
</tr>
<tr>
<td>sed -n &lsquo;5p;5q&rsquo; hello.txt</td>
<td>查看第5⾏</td>
</tr>
<tr>
<td>paste file1 file2</td>
<td>合并两个⽂件或两栏的内容</td>
</tr>
<tr>
<td>paste -d &lsquo;+&rsquo; file1 file2</td>
<td>合并两个⽂件或两栏的内容，中间⽤&quot;+&ldquo;区分</td>
</tr>
<tr>
<td>sort file1 file2</td>
<td>排序两个⽂件的内容</td>
</tr>
<tr>
<td>comm -1 file1 file2</td>
<td>⽐较两个⽂件的内容(去除&rsquo;file1&rsquo;所含内容)</td>
</tr>
<tr>
<td>comm -2 file1 file2</td>
<td>⽐较两个⽂件的内容(去除&rsquo;file2&rsquo;所含内容</td>
</tr>
<tr>
<td>comm -3 file1 file2</td>
<td>⽐较两个⽂件的内容(去除两⽂件共有部分)</td>
</tr>
</tbody>
</table>
<h3 id="打包和解压">打包和解压</h3>
<table>
<thead>
<tr>
<th>常用命令</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>zip xxx.zip file</td>
<td>压缩⾄zip包</td>
</tr>
<tr>
<td>zip -r xxx.zip file1 file2 dir1</td>
<td>将多个⽂件+⽬录压成zip包</td>
</tr>
<tr>
<td>unzip xxx.zip</td>
<td>解压zip包</td>
</tr>
<tr>
<td>tar -cvf xxx.tar file</td>
<td>创建⾮压缩tar包</td>
</tr>
<tr>
<td>tar -cvf xxx.tar file1 file2 dir1</td>
<td>将多个⽂件+⽬录打tar包</td>
</tr>
<tr>
<td>tar -tf xxx.tar</td>
<td>查看tar包的内容</td>
</tr>
<tr>
<td>tar -xvf xxx.tar</td>
<td>解压tar包</td>
</tr>
<tr>
<td>tar -xvf xxx.tar -C /dir</td>
<td>将tar包解压⾄指定⽬录</td>
</tr>
<tr>
<td>tar -cvfj xxx.tar.bz2 dir</td>
<td>创建bz2压缩包</td>
</tr>
<tr>
<td>tar -jxvf xxx.tar.bz2</td>
<td>解压bz2压缩包</td>
</tr>
<tr>
<td>tar -cvfz xxx.tar.gz dir</td>
<td>创建gzip压缩包</td>
</tr>
<tr>
<td>tar -zxvf xxx.tar.gz</td>
<td>解压gzip压缩包</td>
</tr>
<tr>
<td>bunzip2 xxx.bz2</td>
<td>解压bz2压缩包</td>
</tr>
<tr>
<td>bzip2 filename</td>
<td>压缩⽂件</td>
</tr>
<tr>
<td>gunzip xxx.gz</td>
<td>解压gzip压缩包</td>
</tr>
<tr>
<td>gzip filename</td>
<td>压缩⽂件</td>
</tr>
<tr>
<td>gzip -9 filename</td>
<td>最⼤程度压缩</td>
</tr>
</tbody>
</table>
<h3 id="rpm包管理命令">RPM包管理命令</h3>
<table>
<thead>
<tr>
<th>常用命令</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>rpm -qa</td>
<td>查看已安装的rpm包</td>
</tr>
<tr>
<td>rpm -q pkg_name</td>
<td>查询某个rpm包</td>
</tr>
<tr>
<td>rpm -q &ndash;whatprovides xxx</td>
<td>显示xxx功能是由哪个包提供的</td>
</tr>
<tr>
<td>rpm -q &ndash;whatrequires xxx</td>
<td>显示xxx功能被哪个程序包依赖的</td>
</tr>
<tr>
<td>rpm -q &ndash;changelog xxx</td>
<td>显示xxx包的更改记录</td>
</tr>
<tr>
<td>rpm -qi pkg_name</td>
<td>查看⼀个包的详细信息</td>
</tr>
<tr>
<td>rpm -qd pkg_name</td>
<td>查询⼀个包所提供的⽂档</td>
</tr>
<tr>
<td>rpm -qc pkg_name</td>
<td>查看已安装rpm包提供的配置⽂件</td>
</tr>
<tr>
<td>rpm -ql pkg_name</td>
<td>查看⼀个包安装了哪些⽂件</td>
</tr>
<tr>
<td>rpm -qf filename</td>
<td>查看某个⽂件属于哪个包</td>
</tr>
<tr>
<td>rpm -qR pkg_name</td>
<td>查询包的依赖关系</td>
</tr>
<tr>
<td>rpm -ivh xxx.rpm</td>
<td>安装rpm包</td>
</tr>
<tr>
<td>rpm -ivh &ndash;test xxx.rpm</td>
<td>测试安装rpm包</td>
</tr>
<tr>
<td>rpm -ivh &ndash;nodeps xxx.rpm</td>
<td>安装rpm包时忽略依赖关系</td>
</tr>
<tr>
<td>rpm -e xxx</td>
<td>卸载程序包</td>
</tr>
<tr>
<td>rpm -Fvh pkg_name</td>
<td>升级确定已安装的rpm包</td>
</tr>
<tr>
<td>rpm -Uvh pkg_name</td>
<td>升级rpm包(若未安装则会安装)</td>
</tr>
<tr>
<td>rpm -V pkg_name</td>
<td>RPM包详细信息校验</td>
</tr>
</tbody>
</table>
<h3 id="yum包管理命令">YUM包管理命令</h3>
<table>
<thead>
<tr>
<th>常用命令</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>yum repolist enabled</td>
<td>显示可⽤的源仓库</td>
</tr>
<tr>
<td>yum search pkg_name</td>
<td>搜索软件包</td>
</tr>
<tr>
<td>yum install pkg_name</td>
<td>下载并安装软件包</td>
</tr>
<tr>
<td>yum install &ndash;downloadonly pkg_name</td>
<td>只下载不安装</td>
</tr>
<tr>
<td>yum list</td>
<td>显示所有程序包</td>
</tr>
<tr>
<td>yum list installed</td>
<td>查看当前系统已安装包</td>
</tr>
<tr>
<td>yum list updates</td>
<td>查看可以更新的包列表</td>
</tr>
<tr>
<td>yum check-update</td>
<td>查看可升级的软件包</td>
</tr>
<tr>
<td>yum update</td>
<td>更新所有软件包</td>
</tr>
<tr>
<td>yum update pkg_name</td>
<td>升级指定软件包</td>
</tr>
<tr>
<td>yum deplist pkg_name</td>
<td>列出软件包依赖关系</td>
</tr>
<tr>
<td>yum remove pkg_name</td>
<td>删除软件包</td>
</tr>
<tr>
<td>yum clean all</td>
<td>清除缓存</td>
</tr>
<tr>
<td>yum clean packages</td>
<td>清除缓存的软件包</td>
</tr>
<tr>
<td>yum clean headers</td>
<td>清除缓存的header</td>
</tr>
</tbody>
</table>
<h3 id="dpkg包管理命令">DPKG包管理命令</h3>
<table>
<thead>
<tr>
<th>常用命令</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>dpkg -c xxx.deb</td>
<td>列出deb包的内容</td>
</tr>
<tr>
<td>dpkg -i xxx.deb</td>
<td>安装/更新deb包</td>
</tr>
<tr>
<td>dpkg -r pkg_name</td>
<td>移除deb包</td>
</tr>
<tr>
<td>dpkg -P pkg_name</td>
<td>移除deb包(不保留配置)</td>
</tr>
<tr>
<td>dpkg -l</td>
<td>查看系统中已安装deb包</td>
</tr>
<tr>
<td>dpkg -l pkg_name</td>
<td>显示包的⼤致信息</td>
</tr>
<tr>
<td>dpkg -L pkg_name</td>
<td>查看deb包安装的⽂件</td>
</tr>
<tr>
<td>dpkg -s pkg_name</td>
<td>查看包的详细信息</td>
</tr>
<tr>
<td>dpkg –unpack xxx.deb</td>
<td>解开deb包的内容</td>
</tr>
</tbody>
</table>
<h3 id="apt软件具">APT软件⼯具</h3>
<table>
<thead>
<tr>
<th>常用命令</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>apt-cache search pkg_name</td>
<td>搜索程序包</td>
</tr>
<tr>
<td>apt-cache show pkg_name</td>
<td>获取包的概览信息</td>
</tr>
<tr>
<td>apt-get install pkg_name</td>
<td>安装/升级软件包</td>
</tr>
<tr>
<td>apt-get purge pkg_name</td>
<td>卸载软件（包括配置）</td>
</tr>
<tr>
<td>apt-get remove pkg_name</td>
<td>卸载软件（不包括配置）</td>
</tr>
<tr>
<td>apt-get update</td>
<td>更新包索引信息</td>
</tr>
<tr>
<td>apt-get upgrade</td>
<td>更新已安装软件包</td>
</tr>
<tr>
<td>apt-get clean</td>
<td>清理缓存</td>
</tr>
</tbody>
</table>
<h2 id="分析工具">分析工具</h2>
<h3 id="jdk自带分析工具">JDK自带分析工具</h3>
<p>参考文章：</p>
<ul>
<li><a href="https://segmentfault.com/a/1190000038209665">https://segmentfault.com/a/1190000038209665</a></li>
<li><a href="https://www.cnblogs.com/kongzhongqijing/articles/5534624.html">https://www.cnblogs.com/kongzhongqijing/articles/5534624.html</a></li>
</ul>
<h4 id="jps">jps</h4>
<p>jps查询系统内所有HotSpot进程，它位于java的bin目录下。</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>jps</td>
<td>输出当前运行主类名称，进程ID</td>
</tr>
<tr>
<td>jps -q</td>
<td>只列出进程ID</td>
</tr>
<tr>
<td>jps -l</td>
<td>输出当前运行主类的全称，进程ID</td>
</tr>
<tr>
<td>jps -v</td>
<td>输出虚拟机进程启动时<code>JVM</code>参数</td>
</tr>
</tbody>
</table>
<h4 id="jstat">jstat</h4>
<p>jstat是JDK自带的一个轻量级小工具。全称“Java Virtual Machine statistics monitoring tool”，和jps一样，都在bin目录下。</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>jstat -gc vmid 1000 10</td>
<td>查看进程<code>pid</code>的<code>GC</code>信息，每1000毫秒 输出一次，输出10次</td>
</tr>
<tr>
<td>jstat -gccause vmid 1000 10</td>
<td>查看进程<code>pid</code>的<code>GC</code>发生的原因,每一秒（1000毫秒）输出一次，输出10次</td>
</tr>
<tr>
<td>jstat -class vmid</td>
<td>查看<code>pid</code>的加载类信息</td>
</tr>
<tr>
<td>jstat -gcutil vmid</td>
<td>对<code>java</code>垃圾回收信息的统计</td>
</tr>
<tr>
<td>jstat -gcnew vmid</td>
<td>显示新生代<code>GC</code>的情况</td>
</tr>
<tr>
<td>jstat -gcold vmid</td>
<td>显示老年代<code>GC</code>的情况</td>
</tr>
</tbody>
</table>
<h4 id="jinfo">jinfo</h4>
<p>jinfo查看虚拟机参数信息，也可用于调整虚拟机配置参数。我们通过<code>jinfo --help</code>能看到相应的参数。</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>jinfo pid</td>
<td>输出关于<code>pid</code>的一堆相关信息</td>
</tr>
<tr>
<td>jinfo -flags pid</td>
<td>查看当前进程曾经赋过值的一些参数</td>
</tr>
<tr>
<td>jinfo -flag name pid</td>
<td>查看指定进程的<code>JVM</code>参数名称的参数的值</td>
</tr>
<tr>
<td>jinfo -flag [+-]name pid</td>
<td>开启或者关闭指定进程对应名称的<code>JVM</code>参数</td>
</tr>
<tr>
<td>jinfo -sysprops pid</td>
<td>来输出当前 <code>JVM</code>进行的全部的系统属性</td>
</tr>
</tbody>
</table>
<p>当使用jinfo进行修改对应进程JVM参数时，有一定的局限性。并不是所有的参数都支持修改，只有参数被标记为manageable的参数才可以被实时修改。</p>
<p>可以使用命令查看被标记为manageable的参数：<code>java -XX:+PrintFlagsFinal -version | grep manageable</code></p>
<h4 id="jmap">jmap</h4>
<p>jmap全称：Java Memory Map，主要用于打印指定Java进程(或核心文件、远程调试服务器)的共享对象内存映射或堆内存细节。jmap以生成 java程序的dump文件， 也可以查看堆内对象示例的统计信息、查看ClassLoader 的信息以及 finalizer 队列。</p>
<p>jmap命令可以获得运行中的JVM的堆的快照，从而可以离线分析堆，以检查内存泄漏，检查一些严重影响性能的大对象的创建，检查系统中什么对象最多，各种对象所占内存的大小等等。可以使用jmap生成Heap Dump。</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>jmap -heap pid</td>
<td>输出整个堆详细信息，包括GC的使用、堆的配置信息，以及内存的使用信息</td>
</tr>
<tr>
<td>jmap -histo:live pid</td>
<td>输出堆中对象的相关统计信息；第一列是序号，第二列是对象个数，第三列是对象大小<code>byte</code>，第四列是<code>class name</code></td>
</tr>
<tr>
<td>jmap -finalizerinfo pid</td>
<td>输出等待终结的对象信息</td>
</tr>
<tr>
<td>jmap -clstats pid</td>
<td>输出类加载器信息</td>
</tr>
<tr>
<td>jmap -dump:[live],format=b,file=filename.hprof pid</td>
<td>把进程堆内存使用情况生成到堆转储<code>dump</code>文件中,<code>live</code>子选项是可选的，假如指定<code>live</code>选项,那么只输出活的对象到文件。<code>dump</code>文件主要作用，如果发生溢出可以使用<code>dump</code>文件分析是哪些数据导致的</td>
</tr>
</tbody>
</table>
<blockquote>
<p>Heap Dump又叫堆转储文件，指一个java进程在某一个时间点的内存快照文件。Heap Dump在触发内存快照的时候会保存以下信息：</p>
<ul>
<li>所有的对象</li>
<li>所有的class</li>
<li>GC Roots</li>
<li>本地方法栈和本地变量</li>
</ul>
<p>通常在写Dump文件前会触发一次Full GC，所以Heap Dump文件里保存的对象都是Full GC后保留的对象信息。
由于生成dump文件比较耗时，所以请耐心等待，尤其是大内存镜像生成的dump文件，则需要更长的时间来完成。</p>
</blockquote>
<p>可以通过参数配置当发生OOM时自动生成dump文件：<code>-XX:+HeapDumpOnOutOfMemeryError -XX:+HeapDumpPath=&lt;filename.hprof&gt;</code>,当然此种方式获取dump文件较大，如果想要获取dump文件较小可以手动获取dump文件并指定只获取存活的对象。</p>
<h4 id="jhat">jhat</h4>
<p>JVM Heap Analysis Tool命令是与jmap搭配使用，用来分析jmap生成的dump文件，jhat内置了一个微型的HTTP/HTML服务器，生成dump的分析结果后，可以在浏览器中查看。在此要注意，一般不会直接在服务器上进行分析，因为jhat是一个耗时并且耗费硬件资源的过程，一般把服务器生成的dump文件复制到本地或其他机器上进行分析。</p>
<p>注意，jhat在jdk9中已经移除，官方对贱使用visualvm来配置jmap进行分析。</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>jhat -port 9998 /tmp/dump.dat</td>
<td>配合<code>jmap</code>命令使用，查看导出的<code>/tmp/dump.dat</code>文件，端口为9998；注意如果<code>dump</code>文件太大，可能需要加上<code>-J-Xmx512m</code>这种参数指定最大堆内存，即<code>jhat -J-Xmx512m -port 9998 /tmp/dump.dat</code></td>
</tr>
<tr>
<td>jhat -baseline dump2.phrof dump1.phrof</td>
<td>对比<code>dump2.phrof </code>与<code>dump1.phrof</code>文件</td>
</tr>
<tr>
<td>jhat heapDump</td>
<td>分析<code>dump</code>文件,默认端口为7000</td>
</tr>
</tbody>
</table>
<h4 id="jstack">jstack</h4>
<p>jstack，全称JVM Stack Trace栈空间追踪，用于生成虚拟机指定进程当前线程快照；主要分析堆栈空间，也就是分析线程的情况，可以分析出死锁问题，以及cpu100%的问题。jstack可以定位到线程堆栈，根据堆栈信息我们可以定位到具体代码，所以它在JVM性能调优中使用得非常多。</p>
<blockquote>
<p>jstack主要用于生成java虚拟机当前时刻的线程快照。线程快照是当前java虚拟机内每一条线程正在执行的方法堆栈的集合，生成线程快照的主要目的是定位线程出现长时间停顿的原因，
如线程间死锁、死循环、请求外部资源导致的长时间等待等。</p>
</blockquote>
<table>
<thead>
<tr>
<th>命令</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>jstack pid</td>
<td>打印出所有的线程，包括用户自己启动的线程和<code>JVM</code>后台线程</td>
</tr>
<tr>
<td>jstack 13324 &gt;1.txt</td>
<td>将13324进程中线程信息写入到<code>1.txt</code>文件中</td>
</tr>
<tr>
<td>jstack 21711｜grep 54ee</td>
<td>在进程21711中查找线程ID为54ee(16进制)的信息</td>
</tr>
<tr>
<td>jstack -l pid</td>
<td>除了堆栈信息外<code>-l</code>参数会显示线程锁的附加信息</td>
</tr>
</tbody>
</table>
<p>除了可以使用jstack打印栈的信息，在java层面也可以使用<code>Thread.getAllStackTraces()</code>方法获取堆栈信息。</p>
<h4 id="jcmd">jcmd</h4>
<p>在JDK1.7之后，新增了一个命令行工具jcmd。</p>
<p>它是一个多功能的工具，可以实现前面除了jstat之外的所有功能。例如，导出dump文件、查看线程信息、导出线程信息、执行GC，JVM运行时间等。</p>
<p>jcmd拥有jmap的大部分功能，并且在官方网站上也推荐使用jcmd代替jmap。</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>jcmd -l</td>
<td>列出所有<code>JVM</code>的进程</td>
</tr>
<tr>
<td>jcmd pid help</td>
<td>针对指定进程罗列出可执行的命令</td>
</tr>
<tr>
<td>jcmd pid &lt;具体命令&gt;</td>
<td>显示指定进程的指令命令的数据</td>
</tr>
</tbody>
</table>
<h3 id="gui分析工具">GUI分析工具</h3>
<h4 id="jconsole">jconsole</h4>
<p>JConsole 是一个内置 Java 性能分析器，可以从命令行（直接输入jconsole）或在 GUI shell （jdk\bin下打开）中运行。</p>
<p>它用于对JVM中内存，线程和类等的监控。这款工具的好处在于，占用系统资源少，而且结合Jstat，可以有效监控到java内存的变动情况，以及引起变动的原因。在项目追踪内存泄露问题时，很实用。</p>
<p><img src="/iblog/posts/annex/images/essays/%E5%B8%B8%E8%A7%81%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5%E5%8F%8A%E7%A8%8B%E5%BA%8F%E9%85%8D%E7%BD%AE-002.png" alt="常见故障排查及程序配置-002"></p>
<p><img src="/iblog/posts/annex/images/essays/%E5%B8%B8%E8%A7%81%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5%E5%8F%8A%E7%A8%8B%E5%BA%8F%E9%85%8D%E7%BD%AE-001.png" alt="常见故障排查及程序配置-001"></p>
<p><img src="/iblog/posts/annex/images/essays/%E5%B8%B8%E8%A7%81%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5%E5%8F%8A%E7%A8%8B%E5%BA%8F%E9%85%8D%E7%BD%AE-003.png" alt="常见故障排查及程序配置-003"></p>
<h4 id="visual-vm">visual vm</h4>
<p>visual vm 是一个功能强大的多合一故障诊断和性能监控的可视化工具。它集成了多个JDK命令行工具，使用visual vm可用于显示虚拟机进程及进程的配置和环境信息，监视应用程序的CPU、GC、堆、方法区及线程的信息等，甚至代替jconsole。</p>
<p>在JDK7，visual vm便作为JDK的一部分发布，在JDK的bin目录下，即：它完全免费。此外，visual vm也可以作为独立软件进行安装。</p>
<p>主要功能：</p>
<ul>
<li>生成读取dump文件</li>
<li>查看JVM参数和系统属性</li>
<li>查看运行中虚拟机进程</li>
<li>生成读取线程快照</li>
<li>程序资源的实时监控</li>
</ul>
<p>visual vm 支持插件扩展，可以在visual vm上安装插件，也可以将visual vm安装在idea上：</p>
<p><img src="/iblog/posts/annex/images/essays/%E5%B8%B8%E8%A7%81%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5%E5%8F%8A%E7%A8%8B%E5%BA%8F%E9%85%8D%E7%BD%AE-006.png" alt="常见故障排查及程序配置-006"></p>
<p><img src="/iblog/posts/annex/images/essays/%E5%B8%B8%E8%A7%81%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5%E5%8F%8A%E7%A8%8B%E5%BA%8F%E9%85%8D%E7%BD%AE-007.png" alt="常见故障排查及程序配置-007"></p>
<p>visual vm可以生成dump文件，生成的dump文件是临时的，如果想要保留该文件需要右键另存为即可：</p>
<p><img src="/iblog/posts/annex/images/essays/%E5%B8%B8%E8%A7%81%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5%E5%8F%8A%E7%A8%8B%E5%BA%8F%E9%85%8D%E7%BD%AE-004.png" alt="常见故障排查及程序配置-004"></p>
<p><img src="/iblog/posts/annex/images/essays/%E5%B8%B8%E8%A7%81%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5%E5%8F%8A%E7%A8%8B%E5%BA%8F%E9%85%8D%E7%BD%AE-005.png" alt="常见故障排查及程序配置-005"></p>
<p>如果堆文件数据较大，排查起来很困难，可以使用OQL语句进行筛选。</p>
<blockquote>
<p>OQL:全称，Object Query Language 类似于SQL查询的一种语言，OQL使用SQL语法，可以在堆中进行对象的筛选。</p>
<p>基本语法：</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">select &lt;JavaScript expression to select&gt; 
[ from (instanceof) &lt;class name&gt; &lt;identifier&gt;
( where &lt;JavaScript boolean expression to filter&gt; ) ]
</code></pre></div><p>1.class name是java类的完全限定名
2.instanceof表示也查询某一个类的子类
3.from和where子句都是可选的
4.可以使用obj.field_name语法访问Java字段</p>
<p>例如</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">-- 查询长度大于等于100的字符串
select s from java.lang.String s where s.value.length &gt;= 100

-- 显示所有File对象的文件路径 
select file.path.value.toString() from java.io.File file

-- 显示由给定id字符串标识的Class的实例
select o from instanceof 0x741012748 o
</code></pre></div></blockquote>
<p>visual vm也可以将两个dump文件进行比较：</p>
<p><img src="/iblog/posts/annex/images/essays/%E5%B8%B8%E8%A7%81%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5%E5%8F%8A%E7%A8%8B%E5%BA%8F%E9%85%8D%E7%BD%AE-008.png" alt="常见故障排查及程序配置-008"></p>
<p>visual vm不但可以生成堆的dump文件，也可以对线程dump：</p>
<p><img src="/iblog/posts/annex/images/essays/%E5%B8%B8%E8%A7%81%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5%E5%8F%8A%E7%A8%8B%E5%BA%8F%E9%85%8D%E7%BD%AE-009.png" alt="常见故障排查及程序配置-009"></p>
<h4 id="eclipse-mat">eclipse MAT</h4>
<p>MAT全称，Memory Analyzer Tool 是一款功能强大的Java堆内存分析器。可以用于查找内存泄漏以及查看内存消耗情况。</p>
<p>MAT是eclipse开发的，不仅可以单独使用，还可以作为插件嵌入在eclipse中使用。是一款免费的性能分析工具，使用起来很方便。</p>
<p>MAT的主要功能就是分析dump文件。分析dump最终目的是为了找出内存泄漏的疑点，防止内存泄漏。</p>
<p>JVM内存包含信息：</p>
<ul>
<li>所有对象信息，包括对象实例、成员变量、存储于栈中的基本数据类型和存储于堆中的其他对象的引用值；</li>
<li>所有的类信息，包括classloader、类名称、父类的信息、静态变量等；</li>
<li>GCRoot到所有的这些对象的引用路径;</li>
<li>线程信息，包括线程的调用栈及线程的局部变量;</li>
</ul>
<p>常见获取dump文件方式：</p>
<ul>
<li>通过jmap或jcmd命令行方式获取；</li>
<li>通过配置JVM参数&rdquo;-XX:+HeapDumpOnOutOfMemoryError&quot;或&quot;-XX:+HeapDumpBeforeFullGC&quot;</li>
<li>使用第三方工具生成dump文件，如：visual vm</li>
</ul>
<hr>
<p><strong>MAT介绍</strong></p>
<p>导入dump文件：</p>
<p>在生成可疑泄漏报告后，会在对应的堆转储文件目录下生成一个zip文件。</p>
<p><img src="/iblog/posts/annex/images/essays/%E5%B8%B8%E8%A7%81%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5%E5%8F%8A%E7%A8%8B%E5%BA%8F%E9%85%8D%E7%BD%AE-010.png" alt="常见故障排查及程序配置-010"></p>
<p><img src="/iblog/posts/annex/images/essays/%E5%B8%B8%E8%A7%81%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5%E5%8F%8A%E7%A8%8B%E5%BA%8F%E9%85%8D%E7%BD%AE-011.png" alt="常见故障排查及程序配置-011"></p>
<p><img src="/iblog/posts/annex/images/essays/%E5%B8%B8%E8%A7%81%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5%E5%8F%8A%E7%A8%8B%E5%BA%8F%E9%85%8D%E7%BD%AE-012.png" alt="常见故障排查及程序配置-012"></p>
<p><img src="/iblog/posts/annex/images/essays/%E5%B8%B8%E8%A7%81%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5%E5%8F%8A%E7%A8%8B%E5%BA%8F%E9%85%8D%E7%BD%AE-013.png" alt="常见故障排查及程序配置-013"></p>
<p><img src="/iblog/posts/annex/images/essays/%E5%B8%B8%E8%A7%81%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5%E5%8F%8A%E7%A8%8B%E5%BA%8F%E9%85%8D%E7%BD%AE-016.png" alt="常见故障排查及程序配置-016"></p>
<p>MAT最主要的功能是分析dump文件，其中比较重要的功能就是histogram(直方图)和dominator tree(支配树)</p>
<hr>
<p><strong>直方图</strong></p>
<p><img src="/iblog/posts/annex/images/essays/%E5%B8%B8%E8%A7%81%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5%E5%8F%8A%E7%A8%8B%E5%BA%8F%E9%85%8D%E7%BD%AE-015.png" alt="常见故障排查及程序配置-015"></p>
<ul>
<li>浅堆：一个对象结构所占用的大小，即对象头+实例数据+对齐填充，不包括内部引用对象大小；</li>
<li>深堆：一个对象被 GC 回收后，可以真实释放的内存大小；</li>
<li>对象的实际大小：一个对象所能触及的所有对象的浅堆大小之和；</li>
</ul>
<p><img src="/iblog/posts/annex/images/essays/%E5%B8%B8%E8%A7%81%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5%E5%8F%8A%E7%A8%8B%E5%BA%8F%E9%85%8D%E7%BD%AE-017.png" alt="常见故障排查及程序配置-017"></p>
<p>如上图所示：（浅堆&lt;= 深堆 &lt;= 实际大小）</p>
<ul>
<li>Object2浅堆大小：为Object2本身；</li>
<li>Object2深堆大小：Object2本身加上Object6；</li>
<li>Object2实际大小：Object2本身加上Object6加上Object5；</li>
</ul>
<p><img src="/iblog/posts/annex/images/essays/%E5%B8%B8%E8%A7%81%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5%E5%8F%8A%E7%A8%8B%E5%BA%8F%E9%85%8D%E7%BD%AE-014.png" alt="常见故障排查及程序配置-014"></p>
<hr>
<p><strong>支配树对象图</strong></p>
<p><img src="/iblog/posts/annex/images/essays/%E5%B8%B8%E8%A7%81%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5%E5%8F%8A%E7%A8%8B%E5%BA%8F%E9%85%8D%E7%BD%AE-018.png" alt="常见故障排查及程序配置-018"></p>
<p>支配树概念源自图论。它体现了对象实例之间的支配关系。在对象的引用图中，所有指向对象B的路径都要经过对象A，则认为对象A支配对象B。如果对象A是离对象B最近的一个支配对象，则认为对象A为对象B的直接支配者。</p>
<p>支配树是基于对象间的引用图建立的，它有以下性质：</p>
<ul>
<li>对象A的子树，即所有被对象A支配的对象集合，表示对象A的保留集，即深堆；</li>
<li>如果对象A支配对象B，那么对象A直接支配者也支配对象B；</li>
<li>支配树的边与对象引用图的边不相对应；</li>
</ul>
<p>分配树能直观的体现对象能否被回收的情况，如图所示，左为对象的引用图，右为对象的支配图。</p>
<ul>
<li>C与E的关系为，C支配E，C是E的直接支配者，G和E为C的保留集；</li>
<li>C与H不是支配关系，因为H被F引用；</li>
</ul>
<p><img src="/iblog/posts/annex/images/essays/%E5%B8%B8%E8%A7%81%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5%E5%8F%8A%E7%A8%8B%E5%BA%8F%E9%85%8D%E7%BD%AE-019.png" alt="常见故障排查及程序配置-019"></p>
<h2 id="java应用程序配置">Java应用程序配置</h2>
<h3 id="jvm常用参数">JVM常用参数</h3>
<p>官方：</p>
<ul>
<li><a href="https://www.oracle.com/java/technologies/javase/vmoptions-jsp.html">https://www.oracle.com/java/technologies/javase/vmoptions-jsp.html</a></li>
<li><a href="https://www.oracle.com/java/technologies/javase/gc-tuning-6.html">https://www.oracle.com/java/technologies/javase/gc-tuning-6.html</a></li>
</ul>
<p>理想的情况下，一个Java程序使用JVM的默认设置也可以运行得很好，所以一般来说，没有必要设置任何JVM参数。然而，由于一些性能问题，我们需要设置合理的JVM参数。</p>
<p>可以通过<code>java -XX:+PrintFlagsInitial</code> 命令查看JVM所有参数。</p>
<p>常用参数：</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>含义</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>-Xms</td>
<td>堆初始值</td>
<td>Xmx和Xms设置为老年代存活对象的3-4倍，即FullGC之后的老年代内存占用的3-4倍</td>
</tr>
<tr>
<td>-Xmx</td>
<td>堆最大值</td>
<td>为了防止自动扩容降低性能，建议将-Xms和-Xmx的值设置为相同值</td>
</tr>
<tr>
<td>-XX:MaxHeapFreeRatio</td>
<td>最大堆内存使用率</td>
<td>默认70，当超过该比例会进行扩容堆，Xms=Xmx时该参数无效</td>
</tr>
<tr>
<td>-XX:MinHeapFreeRatio</td>
<td>最小堆内存使用率</td>
<td>默认40，当低于该比例会缩减堆，Xms=Xmx时该参数无效</td>
</tr>
<tr>
<td>-Xmn</td>
<td>年轻代内存最大值</td>
<td>年轻代设置的越大，老年代区域就会减少。一般不允许年轻代比老年代还大，因为要考虑GC时最坏情况，所有对象都晋升到老年代。建议设置为老年代存活对象的1-1.5倍，最大可以设置为-Xmx/2 。考虑性能，一般会通过参数 -XX:NewSize 设置年轻代初始大小。如果知道了年轻代初始分配的对象大小，可以节省新生代自动扩展的消耗。</td>
</tr>
<tr>
<td>-XX:SurvivorRatio</td>
<td>年轻代中两个Survivor区和Eden区大小比率</td>
<td>例如： -XX:SurvivorRatio=10 表示伊甸园区是幸存者其中一个区大小的10倍，所以,伊甸园区占新生代大小的10/12, 幸存区From和幸存区To 每个占新生代的1/12</td>
</tr>
<tr>
<td>-XX:NewRatio</td>
<td>年轻生代和老年代的比率</td>
<td>例如：-XX:NewRatio=3 指定老年代/新生代为3/1. 老年代占堆大小的 3/4 ，新生代占 1/4 。如果针对新生代,同时定义绝对值和相对值,绝对值将起作用，建议将年轻代的大小为整个堆的3/8左右。</td>
</tr>
<tr>
<td>-XX:+HeapDumpOnOutOfMemoryError</td>
<td>让JVM在发生内存溢出时自动的生成堆内存快照</td>
<td>可以通过-XX:HeapDumpPath=path参数将生成的快照放到指定路径下</td>
</tr>
<tr>
<td>-XX:OnOutOfMemoryError</td>
<td>当内存溢发生时可以执行一些指令</td>
<td>比如发个E-mail通知管理员或者执行一些清理工作，执行脚本</td>
</tr>
<tr>
<td>-XX:ThreadStackSize</td>
<td>每个线程栈最大值</td>
<td>栈设置太大，会导致线程创建减少，栈设置小，会导致深入不够，深度的递归会导致栈溢出，建议栈深度设置在3000-5000k。</td>
</tr>
<tr>
<td>-XX:MetaspaceSize</td>
<td>初始化的元空间大小</td>
<td>如果元空间大小达到了这个值，就会触发Full GC为了避免频繁的Full GC，建议将- XX：MetaspaceSize设置较大值。如果释放了空间之后，元空间还是不足，那么就会自动增加MetaspaceSize的大小</td>
</tr>
<tr>
<td>-XX:MaxMetaspaceSize</td>
<td>元空间最大值</td>
<td>默认情况下，元空间最大的大小是系统内存的大小，元空间一直扩大，虚拟机可能会消耗完所有的可用系统内存。</td>
</tr>
</tbody>
</table>
<h3 id="jvm调优">JVM调优</h3>
<p>JVM优化是到最后不得已才采用的手段，对JVM内存的系统级的调优主要的目的是减少GC的频率和Full GC的次数。</p>
<p>何时调优：</p>
<ol>
<li>Full GC 次数频繁</li>
<li>GC 停顿时间过长</li>
<li>应用出现OutOfMemory 等内存异常</li>
<li>堆内存持续上涨达到设置的最大内存值</li>
</ol>
<p>调优原则：</p>
<ol>
<li>多数导致GC问题的Java应用，都不是因为我们参数设置错误，而是代码问题</li>
<li>在实际使用中，分析GC情况优化代码比优化JVM参数更好</li>
<li>减少创建对象的数量、减少使用全局变量和大对象</li>
</ol>
<p>调优思路：</p>
<ol>
<li>分析GC日志及dump文件，判断是否需要优化，确定瓶颈问题点。如果各项参数设置合理，系统没有超时日志出现，GC频率不高，GC耗时不高，那么没有必要进行GC优化，如果GC时间超过1-3秒，或者频繁GC，则必须优化。</li>
<li>确定JVM调优目标。如果内存分配过大或过小，或者采用的GC收集器比较慢，则应该优先调整这些参数，并且先找1台或几台机器进行测试，然后比较优化过的机器和没有优化的机器的性能对比，并有针对性的做出最后选择。</li>
<li>不断的分析和调整，直到找到合适的JVM参数配置。</li>
</ol>
<h3 id="java程序shell脚本示例">Java程序shell脚本示例</h3>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/sh
</span><span class="cp"></span>
<span class="c1">#非特殊应用下面内存分配已经够用</span>
<span class="nv">HEAP_MEMORY</span><span class="o">=</span>1024M
<span class="nv">METASPACE_SIZE</span><span class="o">=</span>256M

<span class="nv">SERVER_HOME</span><span class="o">=</span><span class="s2">&#34;</span><span class="k">$(</span> <span class="nb">cd</span> <span class="s2">&#34;</span><span class="k">$(</span> dirname <span class="s2">&#34;</span><span class="nv">$0</span><span class="s2">&#34;</span>  <span class="k">)</span><span class="s2">&#34;</span> <span class="o">&amp;&amp;</span> <span class="nb">pwd</span>  <span class="k">)</span><span class="s2">&#34;</span>
<span class="nv">APP_NAME</span><span class="o">=</span><span class="si">${</span><span class="p">@: -1</span><span class="si">}</span>

<span class="c1">#使用说明，用来提示输入参数  </span>
help<span class="o">()</span> <span class="o">{</span>
    <span class="nb">echo</span> <span class="s2">&#34;Usage: start.sh {start|stop|restart|status|help} APP_NAME.jar&#34;</span> &gt;<span class="p">&amp;</span><span class="m">2</span>
    <span class="nb">echo</span> <span class="s2">&#34;Examples:&#34;</span>
    <span class="nb">echo</span> <span class="s2">&#34;  sh start.sh start APP_NAME.jar&#34;</span>
    <span class="nb">echo</span> <span class="s2">&#34;  sh start.sh stop APP_NAME.jar&#34;</span>
    <span class="nb">echo</span> <span class="s2">&#34;  sh start.sh start -Heap 1024M -MetaspaceSize 256M APP_NAME.jar&#34;</span>
<span class="o">}</span>

<span class="c1">#检查程序是否在运行  </span>
is_exist<span class="o">()</span> <span class="o">{</span>
    <span class="nv">pid</span><span class="o">=</span><span class="sb">`</span>ps -ef <span class="p">|</span> grep <span class="si">${</span><span class="nv">SERVER_HOME</span><span class="si">}</span> <span class="p">|</span> grep <span class="si">${</span><span class="nv">APP_NAME</span><span class="si">}</span> <span class="p">|</span> grep -v grep <span class="p">|</span> awk <span class="s1">&#39;{print $2}&#39;</span> <span class="sb">`</span>
    <span class="c1">#如果不存在返回1，存在返回0  </span>
    <span class="k">if</span> <span class="o">[</span> -z <span class="s2">&#34;</span><span class="si">${</span><span class="nv">pid</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
      <span class="k">return</span> <span class="m">1</span>
    <span class="k">else</span>
      <span class="k">return</span> <span class="m">0</span>
    <span class="k">fi</span>
<span class="o">}</span>

<span class="c1">#启动方法  </span>
start<span class="o">()</span> <span class="o">{</span>
   is_exist
   <span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -eq <span class="s2">&#34;0&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
      <span class="nb">echo</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">APP_NAME</span><span class="si">}</span><span class="s2"> is already running. pid=</span><span class="si">${</span><span class="nv">pid</span><span class="si">}</span><span class="s2"> .&#34;</span>  
   <span class="k">else</span>
      <span class="nb">echo</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">APP_NAME</span><span class="si">}</span><span class="s2"> running...&#34;</span>
      <span class="nv">JAVA_OPTS</span><span class="o">=</span><span class="s2">&#34;-server -XX:+UseG1GC -XX:+HeapDumpOnOutOfMemoryError&#34;</span>
      <span class="nv">JAVA_OPTS</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">JAVA_OPTS</span><span class="si">}</span><span class="s2"> -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false&#34;</span>
      <span class="c1">#JAVA_OPTS=&#34;${JAVA_OPTS} -Djava.rmi.server.hostname=${LOCAL_IP} -Dcom.sun.management.jmxremote.port=${JMX_PORT} -Dcom.sun.management.jmxremote.rmi.port=${JMX_PORT}&#34;</span>

      <span class="nb">shift</span>
      <span class="nv">ARGS</span><span class="o">=(</span><span class="nv">$*</span><span class="o">)</span>
      <span class="k">for</span> <span class="o">((</span><span class="nv">i</span><span class="o">=</span>0<span class="p">;</span> i&lt;<span class="si">${#</span><span class="nv">ARGS</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span> i++<span class="o">))</span><span class="p">;</span> <span class="k">do</span>
          <span class="k">case</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">ARGS</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span><span class="si">}</span><span class="s2">&#34;</span> in
          -D*<span class="o">)</span>    <span class="nv">JAVA_OPTS</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">JAVA_OPTS</span><span class="si">}</span><span class="s2"> </span><span class="si">${</span><span class="nv">ARGS</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span><span class="si">}</span><span class="s2">&#34;</span> <span class="p">;;</span>
          -Heap*<span class="o">)</span> <span class="nv">HEAP_MEMORY</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">ARGS</span><span class="p">[</span><span class="nv">$i</span><span class="p">+1]</span><span class="si">}</span><span class="s2">&#34;</span> <span class="p">;;</span>
          -MetaspaceSize*<span class="o">)</span> <span class="nv">METASPACE_SIZE</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">ARGS</span><span class="p">[</span><span class="nv">$i</span><span class="p">+1]</span><span class="si">}</span><span class="s2">&#34;</span> <span class="p">;;</span>
          <span class="k">esac</span>
      <span class="k">done</span>

      <span class="nv">JAVA_OPTS</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">JAVA_OPTS</span><span class="si">}</span><span class="s2"> -Xms</span><span class="si">${</span><span class="nv">HEAP_MEMORY</span><span class="si">}</span><span class="s2"> -Xmx</span><span class="si">${</span><span class="nv">HEAP_MEMORY</span><span class="si">}</span><span class="s2"> -XX:MaxMetaspaceSize=</span><span class="si">${</span><span class="nv">METASPACE_SIZE</span><span class="si">}</span><span class="s2"> -XX:MetaspaceSize=</span><span class="si">${</span><span class="nv">METASPACE_SIZE</span><span class="si">}</span><span class="s2">&#34;</span>
      <span class="c1">#生产环境加上下面这个配置 服务启动的时候真实的分配物理内存给jvm</span>
      <span class="c1">#JAVA_OPTS=&#34;${JAVA_OPTS} -XX:+AlwaysPreTouch&#34; </span>
      <span class="nv">JAVA_OPTS</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">JAVA_OPTS</span><span class="si">}</span><span class="s2"> -Duser.dir=</span><span class="si">${</span><span class="nv">SERVER_HOME</span><span class="si">}</span><span class="s2">&#34;</span>
      <span class="c1">#下面两段根据需要酌情配置</span>
      <span class="c1">#JAVA_OPTS=&#34;${JAVA_OPTS} -Xloggc:${APP_NAME}.gc.log&#34;</span>
      <span class="c1">#JAVA_OPTS=&#34;${JAVA_OPTS} -Dapp.name=${SERVER_NAME} -Dlogging.config=${SERVER_HOME}/logback-spring.xml -Dspring.profiles.active=dev&#34;</span>
      <span class="nb">echo</span> <span class="s2">&#34;jvm args: </span><span class="si">${</span><span class="nv">JAVA_OPTS</span><span class="si">}</span><span class="s2">&#34;</span>
      java <span class="si">${</span><span class="nv">JAVA_OPTS</span><span class="si">}</span> -jar <span class="si">${</span><span class="nv">APP_NAME</span><span class="si">}</span> &gt;/dev/null 2&gt;<span class="p">&amp;</span><span class="m">1</span> <span class="p">&amp;</span>
   <span class="k">fi</span>
<span class="o">}</span>

<span class="c1">#停止方法  </span>
stop<span class="o">()</span> <span class="o">{</span>
   is_exist
   <span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -eq <span class="s2">&#34;0&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
     <span class="nb">echo</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">APP_NAME</span><span class="si">}</span><span class="s2"> is stopping...&#34;</span>
     <span class="nb">kill</span> -9 <span class="nv">$pid</span>
   <span class="k">else</span>
     <span class="nb">echo</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">APP_NAME</span><span class="si">}</span><span class="s2"> is not running&#34;</span>  
   <span class="k">fi</span>
<span class="o">}</span>

<span class="c1">#输出运行状态  </span>
status<span class="o">()</span> <span class="o">{</span>
   is_exist
   <span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -eq <span class="s2">&#34;0&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
     <span class="nb">echo</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">APP_NAME</span><span class="si">}</span><span class="s2"> is running. Pid is </span><span class="si">${</span><span class="nv">pid</span><span class="si">}</span><span class="s2">&#34;</span>  
   <span class="k">else</span>
     <span class="nb">echo</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">APP_NAME</span><span class="si">}</span><span class="s2"> is not running.&#34;</span>  
   <span class="k">fi</span>
<span class="o">}</span>

<span class="c1">#根据输入参数，选择执行对应方法，不输入则执行使用说明  </span>
<span class="k">case</span> <span class="s2">&#34;</span><span class="nv">$1</span><span class="s2">&#34;</span> in
   <span class="s2">&#34;start&#34;</span><span class="o">)</span>
     start <span class="nv">$@</span><span class="p">;</span>
     <span class="p">;;</span>
   <span class="s2">&#34;stop&#34;</span><span class="o">)</span>
     stop <span class="nv">$@</span><span class="p">;</span>
     <span class="p">;;</span>
   <span class="s2">&#34;status&#34;</span><span class="o">)</span>
     status <span class="nv">$@</span><span class="p">;</span>
     <span class="p">;;</span>
   <span class="s2">&#34;restart&#34;</span><span class="o">)</span>
     stop <span class="nv">$@</span><span class="p">;</span>
     start <span class="nv">$@</span><span class="p">;</span>
     <span class="p">;;</span>
   *<span class="o">)</span>
     <span class="nb">help</span>
     <span class="p">;;</span>
<span class="k">esac</span>
</code></pre></div><h2 id="常见故障排查">常见故障排查</h2>
<h3 id="cpu使用过高定位分析">CPU使用过高定位分析</h3>
<p>一般在生产环境排查程序故障，都会查看日志什么的，但是有些故障日志是看不出来的，就比如：CPU使用过高。</p>
<p>那应该怎么办呢？我们需要结合linux命令和JDK相关命令来排查程序故障。</p>
<p>步骤：</p>
<ul>
<li>首先使用top命令，找出CPU占比最高的Java进程；然后进一步定位后台程序，如果发现使用过高的进程ID,记录下来方便排查；</li>
<li>定位到具体的线程；使用<code>ps -mp 进程ID -o THREAD,tid,time</code>命令可以找到有问题的线程ID；
<blockquote>
<p>ps -mp 进程ID -o THREAD,tid,time 说明：
-m：显示所有线程
-p：pid进程使用CPU的时间
-o：该参数后是用户自定义参数</p>
</blockquote>
</li>
<li>获取到线程ID后，将线程ID转化为16进制格式，如果有英文要小写格式；可以用命令<code>printf &quot;%x\n&quot; 线程ID</code>,当然也可以使用工具从10进制转16进制。
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">printf &#34;%x\n&#34; 16
</code></pre></div></li>
<li>线程ID转成16进制后，执行最后一个命令：<code>jstack 进程ID | grep 16进制线程ID -A50</code>,就能看到有问题的代码。</li>
</ul>
<h3 id="内存使用过高定位分析">内存使用过高定位分析</h3>
<p>与CPU使用过高同样的，内存如果占用过大，查看程序日志也看不出来。</p>
<p>步骤：</p>
<ul>
<li>使用top命令查看应用程序内存占用情况，查看内存使用情况,如果发现使用过高的进程ID,记录下来；</li>
<li>根据进程ID查询具体线程ID: <code>ps p进程ID -L -o pcpu,pmem,pid,tid,time,tname,cmd</code>,记下使用内存异常的记下线程ID；</li>
<li>将内存使用较高的线程的堆栈信息写入文件：<code>jstack -l 进程ID &gt; 文件名</code>,写入文件后将文件中的线程ID转换为16进制,在文件中搜索16进制线程ID即可；</li>
</ul>
<h3 id="死锁编码及定位分析">死锁编码及定位分析</h3>
<p>死锁经常表现为程序的停顿，或者不再响应用户的请求。从操作系统上观察，对应进程的CPU占用率为零，很快会从top或prstat的输出中消失。</p>
<p>死锁示例代码：</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">public class MainTest {

    public static void main(String[] args) {
         String lockA = &#34;lockA&#34;;
         String lockB = &#34;lockB&#34;;
        new Thread(new ThreadHolderLock(lockA,lockB),&#34;线程AAA&#34;).start();
        new Thread(new ThreadHolderLock(lockB,lockA),&#34;线程BBB&#34;).start();
    }
}

class ThreadHolderLock implements Runnable{

    private String lockA;
    private String lockB;

    public ThreadHolderLock(String lockA, String lockB){
        this.lockA = lockA;
        this.lockB = lockB;
    }

    @Override
    public void run() {
        synchronized (lockA){
            System.out.println(Thread.currentThread().getName() + &#34;\t 持有锁 &#34;+ lockA+&#34;, 尝试获得&#34;+ lockB);

            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }

            synchronized (lockB){
                System.out.println(Thread.currentThread().getName() + &#34;\t 持有锁 &#34;+ lockB+&#34;, 尝试获得&#34;+ lockA);
            }
        }
    }
}
</code></pre></div><p>步骤：</p>
<ul>
<li>使用<code>jps -l</code>命令找到程序进程；</li>
<li>使用<code>jstack pid</code>命令打印堆栈信息；</li>
</ul>
<p>上面死锁示例代码使用<code>jstack pid</code>后的一些信息：</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">Found one Java-level deadlock:
=============================
&#34;线程BBB&#34;:
  waiting to lock monitor 0x00007feb0d80b018 (object 0x000000076af2d588, a java.lang.String),
  which is held by &#34;线程AAA&#34;
&#34;线程AAA&#34;:
  waiting to lock monitor 0x00007feb0d80d8a8 (object 0x000000076af2d5c0, a java.lang.String),
  which is held by &#34;线程BBB&#34;

Java stack information for the threads listed above:
===================================================
&#34;线程BBB&#34;:
	at com.github.springcloud.service.ThreadHolderLock.run(MainTest.java:35)
	- waiting to lock &lt;0x000000076af2d588&gt; (a java.lang.String)
	- locked &lt;0x000000076af2d5c0&gt; (a java.lang.String)
	at java.lang.Thread.run(Thread.java:748)
&#34;线程AAA&#34;:
	at com.github.springcloud.service.ThreadHolderLock.run(MainTest.java:35)
	- waiting to lock &lt;0x000000076af2d5c0&gt; (a java.lang.String)
	- locked &lt;0x000000076af2d588&gt; (a java.lang.String)
	at java.lang.Thread.run(Thread.java:748)

Found 1 deadlock.
</code></pre></div><h3 id="内存泄露排查分析">内存泄露排查分析</h3>
<p>Java虚拟机是使用引用计数法和可达性分析来判断对象是否可回收，本质是判断一个对象是否还被引用，如果没有引用则回收。在开发的过程中，由于代码的实现不同就会出现很多种内存泄漏问题，让gc误以为此对象还在引用中，无法回收，造成内存泄漏。</p>
<p>当内存泄露时，如果不是JVM参数中的内存分配太小了，那么从根本上解决Java内存泄露的唯一方法就是修改程序。</p>
<p>内存泄露主要原因：</p>
<ul>
<li>在内存中加载过大的数据，例如，从数据库取出过多数据；</li>
<li>资源未关闭造成的内存泄漏；</li>
<li>变量不合理的作用域，使用完毕，如果没有及时的赋值为null，则会造成内存泄露；</li>
<li>长生命周期的对象中引用短生命周期对象，很可能会出现内存泄露；</li>
</ul>
<p>内存泄漏排查：</p>
<ol>
<li>内存泄漏的主要表象就是内存不足，所以首先要看一下JVM启动参数中内存空间分配是否过小，如果是这种问题调整该参数即可；</li>
<li>从代码层面找问题，如果之前从未出现过此类问题，新增接口或者引入新第三包的时候后出现该问题，则可能是新增的部分代码存在问题；</li>
<li>使用jdk相关命令进行排查分析：
<ul>
<li>使用jstat -gc <vmid> 查看GC垃圾回收统计信息，看Full GC后堆空间使用内存还持续增长，且有增长到Xmx设定值的趋势基本可以肯定存在内存泄露，如果当前完全垃圾回收后内存增长到一个值之后，又能回落，总体上处于一个动态平衡，那么内存泄漏基本可以排除；也可以隔断时间抽取老年代占用内存情况，如果老年代占用情况持续上升也很有可能存在内存泄露的情况；</li>
<li>把堆dump下来再用工具进行分析，但dump堆要花较长的时间，并且文件巨大，不建议这样；可以使用jmap -histo:live <pid>在线进行分析,查看输出的对象数量如果过大就需要额外注意；</li>
</ul>
</li>
</ol>
<p>使用MAT找到内存泄漏的代码思路：</p>
<ul>
<li><a href="https://blog.csdn.net/lnkToKing/article/details/103533995">https://blog.csdn.net/lnkToKing/article/details/103533995</a></li>
</ul>
<ol>
<li>打开MAT中histogram，找到堆内存中占用最大的对象（内存泄漏很有可能就是由大对象导致的）；</li>
<li>由大对象找被哪些线程引用，查看内存占用最大的线程；</li>
<li>从线程中的堆栈信息找到项目中自定义的包和对象，从而可定位到具体的代码；</li>
</ol>
</div>
                    <div class="post_footer">
                        <div class="meta">
                            <div class="info">
                                <span class="field tags">
                                    <i class="ri-stack-line"></i>
                                    
                                    
                                    <a href="https://whiteppure.github.io/iblog/tags/linux/">linux</a>
                                    
                                    <a href="https://whiteppure.github.io/iblog/tags/java/">Java</a>
                                    
                                    
                                    
                                    <span id="busuanzi_container_page_pv">
                                      阅读量<span id="busuanzi_value_page_pv"></span>次
                                    </span>
                                    
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                
                
                
<div class="doc_comments">
    <div class="comments_block_title">发表评论</div>
    <div id="vcomments"></div>
</div>

<link rel="stylesheet" href="https://whiteppure.github.io/iblog/css/comments.css" />

<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='//unpkg.com/valine/dist/Valine.min.js'></script>


<script type="text/javascript">
    new Valine({
        el: '#vcomments',
        appId: 'pRSrjsfbN6L1DUxgfqJWOMYP-gzGzoHsz',
        appKey: 'VPWpnDPGDM8Xhdlh5OvHOpak',
        placeholder: '说点什么吧...',
        visitor: 'true',
        
        emojiCDN: '//i0.hdslb.com/bfs/emote/',
        
        emojiMaps: {
            "tv_doge": "6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png",
            "tv_亲亲": "a8111ad55953ef5e3be3327ef94eb4a39d535d06.png",
            "tv_偷笑": "bb690d4107620f1c15cff29509db529a73aee261.png",
            "tv_再见": "180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png",
            "tv_冷漠": "b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png",
            "tv_发怒": "34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png",
            "tv_发财": "34db290afd2963723c6eb3c4560667db7253a21a.png",
            "tv_可爱": "9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png",
            "tv_吐血": "09dd16a7aa59b77baa1155d47484409624470c77.png",
            "tv_呆": "fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png",
            "tv_呕吐": "9f996894a39e282ccf5e66856af49483f81870f3.png",
            "tv_困": "241ee304e44c0af029adceb294399391e4737ef2.png",
            "tv_坏笑": "1f0b87f731a671079842116e0991c91c2c88645a.png",
            "tv_大佬": "093c1e2c490161aca397afc45573c877cdead616.png",
            "tv_大哭": "23269aeb35f99daee28dda129676f6e9ea87934f.png",
            "tv_委屈": "d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png",
            "tv_害羞": "a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png",
            "tv_尴尬": "7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png",
            "tv_微笑": "70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png",
            "tv_思考": "90cf159733e558137ed20aa04d09964436f618a1.png",
            "tv_惊吓": "0d15c7e2ee58e935adc6a7193ee042388adc22af.png",
            "tv_打脸": "56ab10b624063e966bfcb76ea5dc4794d87dfd47.png",
            "tv_抓狂": "fe31c08edad661d63762b04e17b8d5ae3c71a757.png",
            "tv_抠鼻": "c666f55e88d471e51bbd9fab9bb308110824a6eb.png",
            "tv_斜眼笑": "911f987aa8bc1bee12d52aafe62bc41ef4474e6c.png",
            "tv_无奈": "ea8ed89ee9878f2fece2dda0ea8a5dbfe21b5751.png",
            "tv_晕": "5443c22b4d07fb1907ccc610c8e6db254f2461b7.png",
            "tv_流汗": "cead1c351ab8d79e9f369605beb90148db0fbed3.png",
            "tv_流泪": "7e71cde7858f0cd50d74b0264aa26db612a8a167.png",
            "tv_流鼻血": "c32d39db2737f89b904ca32700d140a9241b0767.png",
            "tv_点赞": "f85c354995bd99e28fc76c869bfe42ba6438eff4.png",
            "tv_生气": "26702dcafdab5e8225b43ffd23c94ac1ff932654.png",
            "tv_生病": "8b0ec90e6b86771092a498c54f09fc94621c1900.png",
            "tv_疑问": "0793d949b18d7be716078349c202c15ff166f314.png",
            "tv_白眼": "c1d59f439e379ee50eef488bcb5e5378e5044ea4.png",
            "tv_皱眉": "72ccad6679fea0d14cce648b4d818e09b8ffea2d.png",
            "tv_目瞪口呆": "0b8cb81a68de5d5365212c99375e7ace3e7891b7.png",
            "tv_睡着": "8b196675b53af58264f383c50ad0945048290b33.png",
            "tv_笑哭": "1abc628f6d4f4caf9d0e7800878f4697abbc8273.png",
            "tv_腼腆": "89712c0d4af73e67f89e35cbc518420380a7f6f4.png",
            "tv_色": "61822c7e9aae5da76475e7892534545336b23a6f.png",
            "tv_调侃": "4bc022533ef31544ca0d72c12c808cf4a1cce3e3.png",
            "tv_调皮": "b9c41de8e82dd7a8515ae5e3cb63e898bf245186.png",
            "tv_鄙视": "6e72339f346a692a495b123174b49e4e8e781303.png",
            "tv_闭嘴": "c9e990da7f6e93975e25fd8b70e2e290aa4086ef.png",
            "tv_难过": "87f46748d3f142ebc6586ff58860d0e2fc8263ba.png",
            "tv_馋": "fc7e829b845c43c623c8b490ee3602b7f0e76a31.png",
            "tv_鬼脸": "0ffbbddf8a94d124ca2f54b360bbc04feb6bbfea.png",
            "tv_黑人问号": "45821a01f51bc867da9edbaa2e070410819a95b2.png",
            "tv_鼓掌": "1d21793f96ef4e6f48b23e53e3b9e42da833a0f6.png"
        }
    })
</script>

                
            </div>
        </div>
    </div>
    <a id="back_to_top" href="#" class="back_to_top"><i class="ri-arrow-up-s-line"></i></a>
    <footer class="footer">
    <div class="powered_by">
        <a href="https://varkai.com">Designed by VarKai,</a>
        <a href="http://www.gohugo.io/">Proudly published with Hugo</a>
    </div>

    <div class="footer_slogan">
        <span>whitepure@2022</span>
    </div>
</footer>
    <script src="https://whiteppure.github.io/iblog/js/jquery-3.5.1.min.js"></script>
<link href="https://whiteppure.github.io/iblog/css/fancybox.min.css" rel="stylesheet">
<script src="https://whiteppure.github.io/iblog/js/fancybox.min.js"></script>
<script src="https://whiteppure.github.io/iblog/js/zozo.js"></script>


<script type="text/javascript" async
    src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\[\[', '\]\]']],
                processEscapes: true,
                processEnvironments: true,
                skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
                TeX: {
                    equationNumbers: { autoNumber: "AMS" },
                    extensions: ["AMSmath.js", "AMSsymbols.js"]
                }
            }
        });

        MathJax.Hub.Queue(function () {
            
            
            
            var all = MathJax.Hub.getAllJax(), i;
            for (i = 0; i < all.length; i += 1) {
                all[i].SourceElement().parentNode.className += ' has-jax';
            }
        });
    </script>

<style>
    code.has-jax {
        font: inherit;
        font-size: 100%;
        background: inherit;
        border: inherit;
        color: #515151;
    }
</style>




<script src="https://cdn.bootcdn.net/ajax/libs/jspdf/1.0.106/jspdf.debug.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/html2canvas/0.5.0-beta4/html2canvas.js"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

























































</body>

</html>