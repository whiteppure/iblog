---
title: "软考高级架构师-架构设计（重点）"
date: 2025-03-19
draft: false
tags: ["考试"]
slug: "exam-software-architect-05"
---



## 软件架构概念
软件架构 = 软件体系结构

架构的本质：
1. 软件架构为软件系统提供了一个结构、行为和属性的高级抽象。
2. 软件架构风格是特定应用领域的惯用模式，架构定义一个词汇表和一组约束。

架构的作用
1. 软件架构是项目干系人进行交流的手段。
2. 软件架构是可传递和可复用的模型，通过研究软件架构可能预测软件的质量。
3. 软件架构使推理和控制的更改更加简单，有助于循序渐进的原型设计，可以作为培训的基础。

软件架构设计是【降低成本】、【改进质量】、【按时和按需交付产品】的关键因素。
架构设计就是需求分配，即将满足需求的职责分配到组件上。分析需求，将需求转换多个功能，设计各个功能之间的联系及功能与需求之间的联系。

## 软件架构设计生命周期
1. 需求分析阶段。模型转换关注两个问题：如何根据需求模型构建架构（SA）模型+模型转换可溯源。
2. 设计阶段。SA研究关注得最早和最多的阶段。ADL、4+1视图。
3. 实现阶段。
4. 构建组装阶段。在较高层次上实现系统，高效。
5. 部署阶段。SA为部署提供高层视图指导。
6. 后开发阶段。动态软件体系结构（内部执行和外部请求导致变化）、体系结构恢复与重建。

### ADL
ADL是这样一种形式化语言（类似伪代码），它在底层语义模型的支持下，为软件系统的概念体系结构建模提供了具体语法和概念框架。

![软考-022](/posts/annex/images/essays/软考-071.png)

- C2SADL【基于组件和消息的软件架构描述语言】
- Wright【分布、并发类型的架构描述语言】
- ACME【架构互换语言】
- UniCon【基于组件和连接的架构描述语言】
- Rapide【基于事件的架构描述语言】
- 其他【Darwin、MetaH、Aesop、Weaves、SADL、xADL】

ADL的三个基本元素：
- 构件：计算或数据存储单元。
- 连接件：用于构件之间交互建模的体系结构构造块及其支配这些交互的规则。
- 架构配置：描述体系结构的构件与连接件的连接图。


### 4+1视图
从不同视角来检查，所以会有不同的视图。

![软考-072](/posts/annex/images/essays/软考-072.png)

1. 逻辑视图：类与对象
2. 实现/开发视图：配置、装配、源代码结构
3. 进程/过程视图：性能、可伸缩、吞吐率、并发
4. 部署/物理视图：发布安装、拓扑结构
5. 用例/场景视图

## 基于架构的软件开发方法
基于架构的软件开发方法（ABSD）
- ABSD方法是架构驱动，即强调由业务【商业】、质量和功能需求的组合驱动架构设计。
- ABSD方法有三个基础。第一个基础是功能的分解。在功能分解中，ABSD方法使用已有的基于模块的内聚和耦合技术；第二个基础是通过选择架构风格来实现质量和业务需求；第三个基础是软件模板的使用。
- 视角与视图：从不同的视角来检查，所以会有不同的视图。用来描述功能需求。
- 用例用来捕获功能需求、特定场景【刺激、环境、响应】用来捕获质量需求。

### 开发过程
![软考-073](/posts/annex/images/essays/软考-073.png)

ABSD能很好的【支持软件重用】。
ABSD方法是一个自顶向下，递归细化的方法。软件系统的体系结构通过该方法得到细化，直到能产生软件构件和类。

#### 架构需求
![软考-074](/posts/annex/images/essays/软考-074.png)

#### 架构设计
![软考-075](/posts/annex/images/essays/软考-075.png)

#### 架构文档化
架构文档化过程的主要输出结果是架构规格说明和测试架构需求的质量设计说明书这两个文档。文档的完整性和质量是软件架构成功的关键因素。

关于文档的三大注意事项：
1. 文档要从使用者的角度进行编写
2. 必须分发给所有与系统有关的开发人员
3. 且必须保证开发者手上的文档是最新的

#### 架构复审
架构复审【架构评估】的目的是标识潜在的风险，及早发现架构设计中的缺陷和错误。

#### 架构实现
![软考-076](/posts/annex/images/essays/软考-076.png)

#### 架构演化
![软考-077](/posts/annex/images/essays/软考-077.png)

## 软件架构风格

| 架构风格    | 子风格               |
|---------|-------------------|
| 数据流风格   | 批处理、管道过滤器         |
| 调用/返回风格 | 主程序/子程序、面相对象、分层架构 |
| 独立构件风格  | 进程通信、事件驱动系统（隐式调用） |
| 虚拟机风格   | 解释器、规则系统          |
| 以数据为中心  | 数据库系统、黑板系统、超文本系统  |

### 数据流风格
数据流风格的基本思想是将数据处理分步骤进行，前一步骤的处理结果是后一步的输入内容，以数据为驱动。
典型的示例有传统编译器、网络报文处理。

![软考-079](/posts/annex/images/essays/软考-079.png)

优点：
1. 松耦合【高内聚-低耦合】；
2. 良好的重用性/可维护性；
3. 可扩展性【标准接口适配】；
4. 良好的隐蔽性；
5. 支持并行；

缺点：
1. 交互性较差；
2. 复杂性较高；
3. 性能较差（每个过滤器都需要解析与合成数据）；

数据流子风格：
- 批处理子风格特点：大量整体数据、无需用户交互
- 管道过滤器子风格特点：流式数据、若用户交互

### 调用/返回风格
开发中用到最多、最重要的风格。调用/返回即，主函数调用子函数，子函数被调用之后，会计算得到执行的结果，最终返回给主函数。

调用/返回风格出现的背景是一个完整的系统过于复杂，将其分成不同的层次，各层之间各司其职，层与层之间进行调用，从而实现解耦合。
各个层次的组件形成不同功能级别的虚拟机；多层相互协同工作，而且实现透明。

优点：
1. 良好的重用性，只要接口不变可用在其它处；
2. 可维护性好；
3. 可扩展性好，支持递增设计；

缺点：
1. 并不是每个系统都方便分层；
2. 层次多了影响效率，很难找到一个合适的、正确的层次抽象方法；
3. 不同层次之间耦合度高的系统很难实现；

调用/返回子风格：
- 主程序子程序：面向过程
- 面相对象：对象的方法调用
- 分层：层与层之间的方法调用

### 独立构件风格
构件之间不直接交互，而是通过事件管理机制来通知目标函数执行。

![软考-080](/posts/annex/images/essays/软考-080.png)

![软考-081](/posts/annex/images/essays/软考-081.png)

优点：
1. 松耦合。
2. 良好的重用性/可修改性/可扩展性。

缺点：
1. 构件放弃了对系统计算的控制。一个构件触发一个事件时，不能确定其他构件是否会响应它。
而且即使它知道事件注册了哪些构件的过程，它也不能保证这些过程被调用的顺序。
2. 数据交换的问题。
3. 既然过程的语义必须依赖于被触发事件的上下文约束，关于正确性的推理就存在问题。

特点：
1. 系统由若干子系统构成且成为一个整体；
2. 系统有统一的目标；
3. 子系统有主从之分；
4. 每一子系统有自己的事件收集和处理机制；

### 虚拟机风格
最常见的虚拟机就是JVM，使用虚拟机有一个特性，就是能够使得跨平台。
C语言代码是直接编译为机器语言，针对不同的操作系统，编译生成的代码会有一些差别，所以它不支持跨平台。
Java语言是将代码编译为字节码文件，只能使用Java虚拟机运行。Java虚拟机的作用是解释和执行字节码文件，分为windows的JVM、Linux的JVM、Mac的JVM，能够对相同的字节码文件运行，所以它能够跨平台。

![软考-082](/posts/annex/images/essays/软考-082.png)


#### 解释器风格
可以灵活应对自定义场景，但复杂度较高，适用于需要自定义规则的场景。

![软考-083](/posts/annex/images/essays/软考-083.png)

- 存储器：存储被解释执行的程序；
- 解释器引擎：解释程序，解释程序会调用解释器引擎；
- 状态器：记录程序执行的当前状态、记录解释器引擎的内容状态；


#### 规则系统风格
基于规则的系统构成：规则集、规则解释器、规则/数据选择及工作内存，一般用在人工智能领域和DSS（决策支持系统）中。

可以灵活应对自定义场景，但复杂度较高。在解释器的基础上增加经验规则、知识库等信息，适用于专家系统，可理解为加强版的解释器。

![软考-084](/posts/annex/images/essays/软考-084.png)

### 以数据为中心
以数据为中心的风格又叫仓库风格。仓库风格顾名思义有一个仓库，仓库是用来存储数据，可理解为数据库。

![软考-085](/posts/annex/images/essays/软考-085.png)

子风格有3个：
- 数据库系统；（了解）
- 黑板系统；（重点）
- 超文本系统；（了解）

#### 黑板系统
黑板用来记录数据，是一个中央数据源，是一个交换信息，更新信息的一个系统。
黑板系统风格就是在仓库风格基础上，增加了一个与知识源之间的触发机制。

![软考-086](/posts/annex/images/essays/软考-086.png)

黑板系统特点：
1. 有不错的可更改性和可维护性；可重用的知识源；容错性和健壮性。
2. 测试困难；不能保证有好的解决方案；难以建立好的控制策略；低效；开发困难；缺少并行机制。
3. 在以数据为中心的基础上，使用中心数据触发业务逻辑部件。

黑板系统典型实例：语音识别、模式识别、图像处理、知识推理等。

### 闭环风格
又叫过程控制风格，常见于嵌入式系统，用于解决简单闭环控制问题，经典应用：空调温控、定速巡航。

假设你看电视，要调到10频道，给定值发给控制器（遥控器），遥控器执行命令，控制换台。数据发出去之后，不会持续跟进，也不会持续比较，它不会达到预期结果。
而闭环系统，会有一个比较环节，通过比较器来判断是否达到预期结果，如果不达到预期结果，则会继续调整。

![软考-087](/posts/annex/images/essays/软考-087.png)

### C2风格
【了解】由构件和连接件组成，通过连接件来连接构件。

![软考-088](/posts/annex/images/essays/软考-088.png)

C2架构的基本规则：
1. 构件和连接件都有一个顶部和一个底部。
2. 构件的顶部要连接到连接件的底部，构件的底部要连接到连接件的顶部，构件之间不允许直连。
3. 一个连接件可以和任意数目的其他构件和连接件连接。
4. 当两个连接件进行直接连接时，必须由其中一个的底部到另一个的顶部。

### 模型驱动架构
模型驱动架构（MDA：Model DrivenArchitecture）全称模型驱动架构，形式化方法下的一种实现分支。
使用模型完成软件的分析、设计、构建、部署、维护等各开发活动。

MDA的主要目标：
1. Portability（可移植性）
2. interoperability（互通性）
3. Reusability（可重用性）

MDA核心模型（有歧义）：
1. 计算无关模型（CIM）：偏向于领域，对某具体行业内一个项目的业务需求及其系统功能需求进行分析。
2. 平台独立模型（PIM）：(UML)平台无关模型，具有高抽象层次、独立于任何实现技术的模型。
3. 平台相关模型（PSM）：偏向于某一个方向、平台。为某种特定实现技术量身定做，让你用这种技术中可用的实现构造来描述系统的模型。PIM会被变换成一个或多个PSM。
4. 代码Code：用源代码对系统的描述（规约）。每个PSM都将被变换成代码。

## 软件架构复用
【软件复用】是一种系统化的软件开发过程，通过识别、分析、分类、获取和修改软件实体，以便在不同软件开发过程中重复使用它们。

软件开发过程中重复使用相同或相似【软件元素】的过程。

复用维度：
- 水平复用：不分行业领域，通用；
- 垂直复用：分行业领域，专用；

软件架构类型复用：
- 机会复用：开发过程中，只要发现有可用的资产，就对其复用，一有机会就复用；
- 系统复用：开发之前，进行规划，决定那些需要复用；

> 复用资产范围：需求、架构设计、元素、建模与分析、测试、项目规划、过程、方法和工具、人员、样本系统、缺陷消除。

复用流程：

![软考-089](/posts/annex/images/essays/软考-089.png)

1. 【获取】构造可复用资产；获取可复用软件资产；
2. 【存储】对资产进行入库；对资产进行分类，构建检索；
3. 【应用】从库里提取，复用资产；修改、配置、扩展、组装、集成，最终形成系统；

## 特定领域软件架构
特定领域软件架构（DSSA：Domain Specific Software Architecture）以一个特定问题领域为对象，形成由领域参考模型、参考需求、参考架构等组成的开发基础架构，支持一个特定领域中多个应用的生成。
简而言之，就是将共性的内容提取出来，形成特定领域架构，从而生成系统。

DSSA类型：
- 垂直型：相同领域，深入；
- 水平型：不同领域，共性通用，平移；

DSSA参与人员：
1. 领域专家：有经验的用户、从事该领域中系统的需求分析、设计、实现以及项目管理的有经验的软件工程师等。领域专家的主要任务包括提供关于领域中系统的需求规约和实现的知识。
2. 领域**分析**人员：领域分析人员应由具有知识工程背景的有经验的系统分析员来担任。
3. 领域**设计**人员：领域设计人员应由有经验的软件设计人员来担任。
4. 领域**实现**人员：领域实现人员应由有经验的程序设计人员来担任。

DSSA建立过程：
1. 定义领域范围
2. 定义领域特定元素
3. 定义领域特定的设计和实现需求的约束
4. 定于领域模型和架构
5. 完成相应的产品单元

DSSA三层次模型：

![软考-090](/posts/annex/images/essays/软考-090.png)

1. 领域开发环境
2. 特定领域应用开发环境
3. 应用执行环境

## 软件产品线
软件产品线包括软件架构技术、领域工程、DSSA也包括自己特有的一些技术。
它的思想是源于工厂的流水线，软件开发若干年之前需要定制开发，实际上相同领域的软件没必要定制，里面存在大部分相同的代码，所以关键是建立核心资源库。
核心资源库是建立公版软件，然后通过定制化来开发软件。适合某个企业专门研发某类软件。

![软考-091](/posts/annex/images/essays/软考-091.png)

## 软件架构评估
软件架构评估是【考试重点】。

**为什么要进行架构评估？**<br>
架构评估的核心是提前暴露设计风险，降低因架构缺陷导致的后期修改成本。例如，未评估扩展性的系统可能在用户量激增时无法扩容，引发服务崩溃。通过评估，可以识别性能瓶颈、安全漏洞或技术选型不合理等问题，帮助团队在开发前期优化设计方向，减少返工风险。

**架构评估到底评什么？**<br>
核心是评估架构是否满足两类需求（着重于非功能性需求）：
- 功能性需求：系统能否正确实现业务功能（如支付流程是否完整）；
- 非功能性需求：重点关注质量属性，例如性能（响应速度）、可靠性（故障恢复能力）、扩展性（能否快速扩容）、安全性（防攻击能力）等。

**架构评估怎么评估？**<br>
使用架构评估方法评估，常见的有：
- 专家评审：组织架构师、开发人员等讨论设计合理性；
- 场景分析法：模拟实际使用场景（如“万人秒杀”），验证架构能否支撑；
- 原型测试：搭建简化版系统，通过压测工具（如JMeter）检查性能瓶颈；
- 工具辅助：用代码分析工具检测耦合度，或用监控工具追踪运行时指标。

### 软件质量属性
### 架构评估方法

